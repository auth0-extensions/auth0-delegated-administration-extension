!function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++){if(i=s[d],o[i])p.push(o[i][0]);o[i]=0}for(n in c)if(Object.prototype.hasOwnProperty.call(c,n))e[n]=c[n];if(u)u(t);for(;p.length;)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var c=r[s];if(0!==o[c])n=!1}if(n)a.splice(t--,1),e=i(i.s=r[0])}return e}var n={},o={0:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){if(!i.o(e,t))Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){if("undefined"!=typeof Symbol&&Symbol.toStringTag)Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t)e=i(e);if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/app/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([977,1]),r()}({25:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(21),o=r.n(n);function a(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0;if(!n.Map.isMap(r)&&!n.List.isList(r))r=o.a.fromJS(r);var i=t[a.type];if(!i)return r;if(r=i(r,a),!n.Map.isMap(r)&&!n.List.isList(r))throw new TypeError("Reducers must return Immutable objects.");return r}}},4:function(e,t,r){"use strict";r.d(t,"H",function(){return n}),r.d(t,"J",function(){return o}),r.d(t,"K",function(){return a}),r.d(t,"I",function(){return i}),r.d(t,"Eb",function(){return s}),r.d(t,"rc",function(){return c}),r.d(t,"Gb",function(){return l}),r.d(t,"Fb",function(){return u}),r.d(t,"Hb",function(){return d}),r.d(t,"Ib",function(){return p}),r.d(t,"Jb",function(){return g}),r.d(t,"L",function(){return m}),r.d(t,"N",function(){return f}),r.d(t,"O",function(){return h}),r.d(t,"M",function(){return E}),r.d(t,"q",function(){return y}),r.d(t,"U",function(){return b}),r.d(t,"W",function(){return v}),r.d(t,"X",function(){return _}),r.d(t,"V",function(){return C}),r.d(t,"T",function(){return T}),r.d(t,"Z",function(){return S}),r.d(t,"ab",function(){return D}),r.d(t,"Y",function(){return F}),r.d(t,"bc",function(){return R}),r.d(t,"f",function(){return P}),r.d(t,"r",function(){return A}),r.d(t,"t",function(){return w}),r.d(t,"u",function(){return O}),r.d(t,"s",function(){return L}),r.d(t,"ec",function(){return j}),r.d(t,"i",function(){return k}),r.d(t,"zb",function(){return U}),r.d(t,"Bb",function(){return I}),r.d(t,"Cb",function(){return N}),r.d(t,"Ab",function(){return q}),r.d(t,"kb",function(){return M}),r.d(t,"mb",function(){return x}),r.d(t,"nb",function(){return B}),r.d(t,"lb",function(){return J}),r.d(t,"jb",function(){return H}),r.d(t,"xb",function(){return V}),r.d(t,"yb",function(){return G}),r.d(t,"sb",function(){return K}),r.d(t,"tb",function(){return W}),r.d(t,"vb",function(){return z}),r.d(t,"wb",function(){return Q}),r.d(t,"ub",function(){return Y}),r.d(t,"ob",function(){return Z}),r.d(t,"qb",function(){return X}),r.d(t,"rb",function(){return $}),r.d(t,"pb",function(){return ee}),r.d(t,"ic",function(){return te}),r.d(t,"m",function(){return re}),r.d(t,"Wb",function(){return ne}),r.d(t,"Yb",function(){return oe}),r.d(t,"Zb",function(){return ae}),r.d(t,"Xb",function(){return ie}),r.d(t,"ac",function(){return se}),r.d(t,"e",function(){return ce}),r.d(t,"a",function(){return le}),r.d(t,"c",function(){return ue}),r.d(t,"d",function(){return de}),r.d(t,"b",function(){return pe}),r.d(t,"kc",function(){return ge}),r.d(t,"o",function(){return me}),r.d(t,"tc",function(){return fe}),r.d(t,"vc",function(){return he}),r.d(t,"wc",function(){return Ee}),r.d(t,"uc",function(){return ye}),r.d(t,"hc",function(){return be}),r.d(t,"l",function(){return ve}),r.d(t,"Sb",function(){return _e}),r.d(t,"Ub",function(){return Ce}),r.d(t,"Vb",function(){return Te}),r.d(t,"Tb",function(){return Se}),r.d(t,"cc",function(){return De}),r.d(t,"g",function(){return Fe}),r.d(t,"v",function(){return Re}),r.d(t,"x",function(){return Pe}),r.d(t,"y",function(){return Ae}),r.d(t,"w",function(){return we}),r.d(t,"gc",function(){return Oe}),r.d(t,"k",function(){return Le}),r.d(t,"Ob",function(){return je}),r.d(t,"Qb",function(){return ke}),r.d(t,"Rb",function(){return Ue}),r.d(t,"Pb",function(){return Ie}),r.d(t,"fc",function(){return Ne}),r.d(t,"j",function(){return qe}),r.d(t,"Kb",function(){return Me}),r.d(t,"Mb",function(){return xe}),r.d(t,"Nb",function(){return Be}),r.d(t,"Lb",function(){return Je}),r.d(t,"lc",function(){return He}),r.d(t,"p",function(){return Ve}),r.d(t,"Cc",function(){return Ge}),r.d(t,"Ec",function(){return Ke}),r.d(t,"Fc",function(){return We}),r.d(t,"Dc",function(){return ze}),r.d(t,"dc",function(){return Qe}),r.d(t,"h",function(){return Ye}),r.d(t,"z",function(){return Ze}),r.d(t,"B",function(){return Xe}),r.d(t,"C",function(){return $e}),r.d(t,"A",function(){return et}),r.d(t,"jc",function(){return tt}),r.d(t,"n",function(){return rt}),r.d(t,"mc",function(){return nt}),r.d(t,"oc",function(){return ot}),r.d(t,"pc",function(){return at}),r.d(t,"nc",function(){return it}),r.d(t,"bb",function(){return st}),r.d(t,"db",function(){return ct}),r.d(t,"eb",function(){return lt}),r.d(t,"cb",function(){return ut}),r.d(t,"xc",function(){return dt}),r.d(t,"zc",function(){return pt}),r.d(t,"Ac",function(){return gt}),r.d(t,"yc",function(){return mt}),r.d(t,"D",function(){return ft}),r.d(t,"F",function(){return ht}),r.d(t,"G",function(){return Et}),r.d(t,"E",function(){return yt}),r.d(t,"fb",function(){return bt}),r.d(t,"hb",function(){return vt}),r.d(t,"ib",function(){return _t}),r.d(t,"gb",function(){return Ct}),r.d(t,"sc",function(){return Tt}),r.d(t,"Db",function(){return St}),r.d(t,"P",function(){return Dt}),r.d(t,"R",function(){return Ft}),r.d(t,"S",function(){return Rt}),r.d(t,"Q",function(){return Pt}),r.d(t,"qc",function(){return At});var n="FETCH_APPLICATIONS",o="FETCH_APPLICATIONS_PENDING",a="FETCH_APPLICATIONS_REJECTED",i="FETCH_APPLICATIONS_FULFILLED",s="LOADED_TOKEN",c="SHOW_LOGIN",l="LOGIN_PENDING",u="LOGIN_FAILED",d="LOGIN_SUCCESS",p="LOGOUT_PENDING",g="LOGOUT_SUCCESS",m="FETCH_CONNECTIONS",f="FETCH_CONNECTIONS_PENDING",h="FETCH_CONNECTIONS_REJECTED",E="FETCH_CONNECTIONS_FULFILLED",y="CLEAR_LOG",b="FETCH_LOGS",v="FETCH_LOGS_PENDING",_="FETCH_LOGS_REJECTED",C="FETCH_LOGS_FULFILLED",T="FETCH_LOG",S="FETCH_LOG_PENDING",D="FETCH_LOG_REJECTED",F="FETCH_LOG_FULFILLED",R="REQUEST_CREATE_USER",P="CANCEL_CREATE_USER",A="CREATE_USER",w="CREATE_USER_PENDING",O="CREATE_USER_REJECTED",L="CREATE_USER_FULFILLED",j="REQUEST_FIELDS_CHANGE",k="CANCEL_FIELDS_CHANGE",U="FIELDS_CHANGE",I="FIELDS_CHANGE_PENDING",N="FIELDS_CHANGE_REJECTED",q="FIELDS_CHANGE_FULFILLED",M="FETCH_USERS",x="FETCH_USERS_PENDING",B="FETCH_USERS_REJECTED",J="FETCH_USERS_FULFILLED",H="FETCH_USER",V="FETCH_USER_PENDING",G="FETCH_USER_REJECTED",K="FETCH_USER_FULFILLED",W="FETCH_USER_LOGS",z="FETCH_USER_LOGS_PENDING",Q="FETCH_USER_LOGS_REJECTED",Y="FETCH_USER_LOGS_FULFILLED",Z="FETCH_USER_DEVICES",X="FETCH_USER_DEVICES_PENDING",$="FETCH_USER_DEVICES_REJECTED",ee="FETCH_USER_DEVICES_FULFILLED",te="REQUEST_REMOVE_MULTIFACTOR",re="CANCEL_REMOVE_MULTIFACTOR",ne="REMOVE_MULTIFACTOR",oe="REMOVE_MULTIFACTOR_PENDING",ae="REMOVE_MULTIFACTOR_REJECTED",ie="REMOVE_MULTIFACTOR_FULFILLED",se="REQUEST_BLOCK_USER",ce="CANCEL_BLOCK_USER",le="BLOCK_USER",ue="BLOCK_USER_PENDING",de="BLOCK_USER_REJECTED",pe="BLOCK_USER_FULFILLED",ge="REQUEST_UNBLOCK_USER",me="CANCEL_UNBLOCK_USER",fe="UNBLOCK_USER",he="UNBLOCK_USER_PENDING",Ee="UNBLOCK_USER_REJECTED",ye="UNBLOCK_USER_FULFILLED",be="REQUEST_REMOVE_BLOCKED_IPS",ve="CANCEL_REMOVE_BLOCKED_IPS",_e="REMOVE_BLOCKED_IPS",Ce="REMOVE_BLOCKED_IPS_PENDING",Te="REMOVE_BLOCKED_IPS_REJECTED",Se="REMOVE_BLOCKED_IPS_FULFILLED",De="REQUEST_DELETE_USER",Fe="CANCEL_DELETE_USER",Re="DELETE_USER",Pe="DELETE_USER_PENDING",Ae="DELETE_USER_REJECTED",we="DELETE_USER_FULFILLED",Oe="REQUEST_PASSWORD_RESET",Le="CANCEL_PASSWORD_RESET",je="PASSWORD_RESET",ke="PASSWORD_RESET_PENDING",Ue="PASSWORD_RESET_REJECTED",Ie="PASSWORD_RESET_FULFILLED",Ne="REQUEST_PASSWORD_CHANGE",qe="CANCEL_PASSWORD_CHANGE",Me="PASSWORD_CHANGE",xe="PASSWORD_CHANGE_PENDING",Be="PASSWORD_CHANGE_REJECTED",Je="PASSWORD_CHANGE_FULFILLED",He="REQUEST_USERNAME_CHANGE",Ve="CANCEL_USERNAME_CHANGE",Ge="USERNAME_CHANGE",Ke="USERNAME_CHANGE_PENDING",We="USERNAME_CHANGE_REJECTED",ze="USERNAME_CHANGE_FULFILLED",Qe="REQUEST_EMAIL_CHANGE",Ye="CANCEL_EMAIL_CHANGE",Ze="EMAIL_CHANGE",Xe="EMAIL_CHANGE_PENDING",$e="EMAIL_CHANGE_REJECTED",et="EMAIL_CHANGE_FULFILLED",tt="REQUEST_RESEND_VERIFICATION_EMAIL",rt="CANCEL_RESEND_VERIFICATION_EMAIL",nt="RESEND_VERIFICATION_EMAIL",ot="RESEND_VERIFICATION_EMAIL_PENDING",at="RESEND_VERIFICATION_EMAIL_REJECTED",it="RESEND_VERIFICATION_EMAIL_FULFILLED",st="FETCH_SCRIPT",ct="FETCH_SCRIPT_PENDING",lt="FETCH_SCRIPT_REJECTED",ut="FETCH_SCRIPT_FULFILLED",dt="UPDATE_SCRIPT",pt="UPDATE_SCRIPT_PENDING",gt="UPDATE_SCRIPT_REJECTED",mt="UPDATE_SCRIPT_FULFILLED",ft="FETCH_ACCESS_LEVEL",ht="FETCH_ACCESS_LEVEL_PENDING",Et="FETCH_ACCESS_LEVEL_REJECTED",yt="FETCH_ACCESS_LEVEL_FULFILLED",bt="FETCH_SETTINGS",vt="FETCH_SETTINGS_PENDING",_t="FETCH_SETTINGS_REJECTED",Ct="FETCH_SETTINGS_FULFILLED",Tt="TOGGLE_STYLE_SETTINGS",St="GET_STYLE_SETTINGS",Dt="FETCH_LANGUAGE_DICTIONARY",Ft="FETCH_LANGUAGE_DICTIONARY_PENDING",Rt="FETCH_LANGUAGE_DICTIONARY_REJECTED",Pt="FETCH_LANGUAGE_DICTIONARY_FULFILLED",At=["username","memberships","connection","password","email","repeatPassword","resetPassword"]},514:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return settings});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),immutable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21),immutable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_utils_createReducer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(25),_createReducer,initialState={loading:!1,error:null,record:{settings:{dict:{title:"",memberships:""},userFields:[],css:""}}},parseFunction=function parseFunction(property,attribute,functionString){if(void 0!==functionString&&lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isString(functionString)&&functionString.startsWith("function"))try{functionString=eval("(".concat(functionString,")"))}catch(error){return eval('(function() { return "error"; })')}return functionString},parseOptions=function(e){if(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isArray(e))e=e.map(function(e){if(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isString(e))return{label:e,value:e};else if(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isObject(e)&&lodash__WEBPACK_IMPORTED_MODULE_2___default.a.has(e,"label")&&lodash__WEBPACK_IMPORTED_MODULE_2___default.a.has(e,"value"))return e;return{label:"Error",value:""}});return e},parseFieldSection=function(e,t,r,n){if(t&&lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isObject(t)){var o=parseFunction(e,"".concat(r,".display"),t.display),a=void 0!==o?o:n;if(void 0!==a)t.display=a;if(t.options)t.options=parseOptions(t.options);if(t.validationFunction)t.validationFunction=parseFunction(e,"".concat(r,".validationFunction"),t.validationFunction)}},settings=Object(_utils_createReducer__WEBPACK_IMPORTED_MODULE_4__.a)(Object(immutable__WEBPACK_IMPORTED_MODULE_1__.fromJS)(initialState),(_createReducer={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createReducer,_constants__WEBPACK_IMPORTED_MODULE_3__.hb,function(e){return e.merge({loading:!0,error:null})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createReducer,_constants__WEBPACK_IMPORTED_MODULE_3__.ib,function(e,t){return e.merge({loading:!1,error:t.errorData})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createReducer,_constants__WEBPACK_IMPORTED_MODULE_3__.gb,function(e,t){var r=t.payload.data;if(r.settings.userFields)r.settings.userFields.forEach(function(e){parseFieldSection(e.property,e,"userField"),parseFieldSection(e.property,e.edit,"userField.edit",e.display),parseFieldSection(e.property,e.create,"userField.create",e.display),parseFieldSection(e.property,e.search,"userField.search",e.display)});if(r.settings.errorTranslator)r.settings.errorTranslator=parseFunction("errorTranslator","errorTranslator",r.settings.errorTranslator);return e.merge({loading:!1,error:null,record:Object(immutable__WEBPACK_IMPORTED_MODULE_1__.fromJS)(r)})}),_createReducer))},876:function(e,t,r){},946:function(e,t,r){var n={"./af":378,"./af.js":378,"./ar":379,"./ar-dz":380,"./ar-dz.js":380,"./ar-kw":381,"./ar-kw.js":381,"./ar-ly":382,"./ar-ly.js":382,"./ar-ma":383,"./ar-ma.js":383,"./ar-sa":384,"./ar-sa.js":384,"./ar-tn":385,"./ar-tn.js":385,"./ar.js":379,"./az":386,"./az.js":386,"./be":387,"./be.js":387,"./bg":388,"./bg.js":388,"./bm":389,"./bm.js":389,"./bn":390,"./bn.js":390,"./bo":391,"./bo.js":391,"./br":392,"./br.js":392,"./bs":393,"./bs.js":393,"./ca":394,"./ca.js":394,"./cs":395,"./cs.js":395,"./cv":396,"./cv.js":396,"./cy":397,"./cy.js":397,"./da":398,"./da.js":398,"./de":399,"./de-at":400,"./de-at.js":400,"./de-ch":401,"./de-ch.js":401,"./de.js":399,"./dv":402,"./dv.js":402,"./el":403,"./el.js":403,"./en-au":404,"./en-au.js":404,"./en-ca":405,"./en-ca.js":405,"./en-gb":406,"./en-gb.js":406,"./en-ie":407,"./en-ie.js":407,"./en-il":408,"./en-il.js":408,"./en-nz":409,"./en-nz.js":409,"./eo":410,"./eo.js":410,"./es":411,"./es-do":412,"./es-do.js":412,"./es-us":413,"./es-us.js":413,"./es.js":411,"./et":414,"./et.js":414,"./eu":415,"./eu.js":415,"./fa":416,"./fa.js":416,"./fi":417,"./fi.js":417,"./fo":418,"./fo.js":418,"./fr":419,"./fr-ca":420,"./fr-ca.js":420,"./fr-ch":421,"./fr-ch.js":421,"./fr.js":419,"./fy":422,"./fy.js":422,"./gd":423,"./gd.js":423,"./gl":424,"./gl.js":424,"./gom-latn":425,"./gom-latn.js":425,"./gu":426,"./gu.js":426,"./he":427,"./he.js":427,"./hi":428,"./hi.js":428,"./hr":429,"./hr.js":429,"./hu":430,"./hu.js":430,"./hy-am":431,"./hy-am.js":431,"./id":432,"./id.js":432,"./is":433,"./is.js":433,"./it":434,"./it.js":434,"./ja":435,"./ja.js":435,"./jv":436,"./jv.js":436,"./ka":437,"./ka.js":437,"./kk":438,"./kk.js":438,"./km":439,"./km.js":439,"./kn":440,"./kn.js":440,"./ko":441,"./ko.js":441,"./ky":442,"./ky.js":442,"./lb":443,"./lb.js":443,"./lo":444,"./lo.js":444,"./lt":445,"./lt.js":445,"./lv":446,"./lv.js":446,"./me":447,"./me.js":447,"./mi":448,"./mi.js":448,"./mk":449,"./mk.js":449,"./ml":450,"./ml.js":450,"./mn":451,"./mn.js":451,"./mr":452,"./mr.js":452,"./ms":453,"./ms-my":454,"./ms-my.js":454,"./ms.js":453,"./mt":455,"./mt.js":455,"./my":456,"./my.js":456,"./nb":457,"./nb.js":457,"./ne":458,"./ne.js":458,"./nl":459,"./nl-be":460,"./nl-be.js":460,"./nl.js":459,"./nn":461,"./nn.js":461,"./pa-in":462,"./pa-in.js":462,"./pl":463,"./pl.js":463,"./pt":464,"./pt-br":465,"./pt-br.js":465,"./pt.js":464,"./ro":466,"./ro.js":466,"./ru":467,"./ru.js":467,"./sd":468,"./sd.js":468,"./se":469,"./se.js":469,"./si":470,"./si.js":470,"./sk":471,"./sk.js":471,"./sl":472,"./sl.js":472,"./sq":473,"./sq.js":473,"./sr":474,"./sr-cyrl":475,"./sr-cyrl.js":475,"./sr.js":474,"./ss":476,"./ss.js":476,"./sv":477,"./sv.js":477,"./sw":478,"./sw.js":478,"./ta":479,"./ta.js":479,"./te":480,"./te.js":480,"./tet":481,"./tet.js":481,"./tg":482,"./tg.js":482,"./th":483,"./th.js":483,"./tl-ph":484,"./tl-ph.js":484,"./tlh":485,"./tlh.js":485,"./tr":486,"./tr.js":486,"./tzl":487,"./tzl.js":487,"./tzm":488,"./tzm-latn":489,"./tzm-latn.js":489,"./tzm.js":488,"./ug-cn":490,"./ug-cn.js":490,"./uk":491,"./uk.js":491,"./ur":492,"./ur.js":492,"./uz":493,"./uz-latn":494,"./uz-latn.js":494,"./uz.js":493,"./vi":495,"./vi.js":495,"./x-pseudo":496,"./x-pseudo.js":496,"./yo":497,"./yo.js":497,"./zh-cn":498,"./zh-cn.js":498,"./zh-hk":499,"./zh-hk.js":499,"./zh-tw":500,"./zh-tw.js":500};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=946},947:function(e,t,r){},948:function(e,t,r){},949:function(e,t,r){},950:function(e,t,r){},951:function(e,t,r){},955:function(e,t,r){},956:function(e,t,r){},960:function(e,t,r){},963:function(e,t,r){},964:function(e,t,r){},965:function(e,t,r){},975:function(e,t,r){if(1)e.exports=r(976)},976:function(e,t,r){"use strict";r.r(t),function(e){t.default=function(){return e.createElement("div",null)}}.call(this,r(0))},977:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"login",function(){return D}),r.d(n,"logout",function(){return R}),r.d(n,"loadCredentials",function(){return w}),r.d(n,"getAccessLevel",function(){return O}),r.d(n,"getAppSettings",function(){return L}),r.d(n,"toggleStyleSettings",function(){return j}),r.d(n,"getStyleSettings",function(){return k});var o={};r.r(o),r.d(o,"fetchApplications",function(){return $});var a={};r.r(a),r.d(a,"fetchConnections",function(){return ee});var i={};r.r(i),r.d(i,"fetchLogs",function(){return te}),r.d(i,"fetchLog",function(){return re}),r.d(i,"clearLog",function(){return ne});var s={};r.r(s),r.d(s,"fetchUsers",function(){return ue}),r.d(s,"createUser",function(){return de}),r.d(s,"requestCreateUser",function(){return pe}),r.d(s,"cancelCreateUser",function(){return ge}),r.d(s,"changeFields",function(){return me}),r.d(s,"requestFieldsChange",function(){return fe}),r.d(s,"cancelChangeFields",function(){return he}),r.d(s,"fetchUserDetail",function(){return Ee}),r.d(s,"fetchUser",function(){return ye}),r.d(s,"requestRemoveMultiFactor",function(){return be}),r.d(s,"cancelRemoveMultiFactor",function(){return ve}),r.d(s,"removeMultiFactor",function(){return _e}),r.d(s,"requestBlockUser",function(){return Ce}),r.d(s,"cancelBlockUser",function(){return Te}),r.d(s,"updateUser",function(){return Se}),r.d(s,"blockUser",function(){return De}),r.d(s,"requestUnblockUser",function(){return Fe}),r.d(s,"requestRemoveBlockedIPs",function(){return Re}),r.d(s,"cancelUnblockUser",function(){return Pe}),r.d(s,"cancelRemoveBlocks",function(){return Ae}),r.d(s,"unblockUser",function(){return we}),r.d(s,"removeUserBlocks",function(){return Oe}),r.d(s,"requestDeleteUser",function(){return Le}),r.d(s,"cancelDeleteUser",function(){return je}),r.d(s,"deleteUser",function(){return ke}),r.d(s,"requestPasswordReset",function(){return Ue}),r.d(s,"cancelPasswordReset",function(){return Ie}),r.d(s,"resetPassword",function(){return Ne}),r.d(s,"requestPasswordChange",function(){return qe}),r.d(s,"cancelPasswordChange",function(){return Me}),r.d(s,"changePassword",function(){return xe}),r.d(s,"requestUsernameChange",function(){return Be}),r.d(s,"cancelUsernameChange",function(){return Je}),r.d(s,"changeUsername",function(){return He}),r.d(s,"requestEmailChange",function(){return Ve}),r.d(s,"cancelEmailChange",function(){return Ge}),r.d(s,"changeEmail",function(){return Ke}),r.d(s,"requestResendVerificationEmail",function(){return We}),r.d(s,"cancelResendVerificationEmail",function(){return ze}),r.d(s,"resendVerificationEmail",function(){return Qe});var c={};r.r(c),r.d(c,"fetchScript",function(){return Ye}),r.d(c,"updateScript",function(){return Ze});r(516),r(718);var l=r(24),u=r.n(l),d=r(0),p=r.n(d),g=r(34),m=r.n(g),f=r(36),h=r(49),E=r(503),y=r(56),b=r(504),v=r.n(b),C=r(4),T={domain:window.config.AUTH0_CUSTOM_DOMAIN||window.config.AUTH0_DOMAIN,clientID:window.config.AUTH0_CLIENT_ID,scope:"openid roles",responseType:"id_token",redirectUri:"".concat(window.config.BASE_URL,"/login")},S=new auth0.WebAuth(T);function D(e,t){return sessionStorage.setItem("delegated-admin:returnTo",e||"/users"),S.authorize({ui_locales:t}),{type:C.rc}}function F(e){if(void 0===e)return!0;var t=new Date(0);return t.setUTCSeconds(e),!(t.valueOf()>(new Date).valueOf()+30)}function R(e){return function(t){if(sessionStorage.clear(),localStorage.clear(),e)window.location.href=e;else if(window.config.FEDERATED_LOGOUT)window.location.href="https://".concat(window.config.AUTH0_CUSTOM_DOMAIN||window.config.AUTH0_DOMAIN,"/v2/logout?federated&client_id=").concat(window.config.AUTH0_CLIENT_ID,"&returnTo=").concat(encodeURIComponent(window.config.BASE_URL));else window.location.href="https://".concat(window.config.AUTH0_CUSTOM_DOMAIN||window.config.AUTH0_DOMAIN,"/v2/logout?client_id=").concat(window.config.AUTH0_CLIENT_ID,"&returnTo=").concat(encodeURIComponent(window.config.BASE_URL));t({type:C.Ib})}}function P(){return new Promise(function(e,t){S.checkSession({},function(r,n){if(r)t(r);else e(n)})})}var A=function e(t,r,n){return new Promise(function(o,a){var i=v()(r);if(!function(e){return F(e.exp)}(i)){if(u.a.defaults.headers.common.Authorization="Bearer ".concat(r),u.a.defaults.headers.common["dae-locale"]=window.config.LOCALE||"en",sessionStorage.setItem("delegated-admin:apiToken:exp",i.exp),u.a.interceptors.request.use(function(r){if(F(sessionStorage.getItem("delegated-admin:apiToken:exp")))return P().then(function(n){return e(t,n.idToken).then(function(){return r.headers.Authorization=u.a.defaults.headers.common.Authorization,Promise.resolve(r)})}).catch(function(e){return D(n,window.config.LOCALE||"en"),Promise.reject(e)});else return r},function(e){return Promise.reject(e)}),u.a.interceptors.response.use(function(e){return e},function(r){var n=r.response;if(n&&401===n.status&&"TokenExpired"===n.data.message)return P().then(function(n){return e(t,n.idToken).then(function(){return r.config.headers.Authorization=u.a.defaults.headers.common.Authorization,u.a.request(r.config)})});else return Promise.reject(r)}),t({type:C.Eb,payload:{token:r}}),t({type:C.Hb,payload:{token:r,decodedToken:i,user:i,returnTo:n}}),n)t(Object(y.push)(n));o()}})};function w(){return function(e){if(window.location.hash)return e({type:C.Gb}),S.parseHash({hash:window.location.hash},function(t,r){if(t||!r||!r.idToken)return e({type:C.Fb,payload:{error:t&&t.error?"".concat(t.error,": ").concat(t.errorDescription):"UnknownError: Unknown Error"}});var n=sessionStorage.getItem("delegated-admin:returnTo")||"/users";return sessionStorage.removeItem("delegated-admin:returnTo"),A(e,r.idToken,n)});var t=sessionStorage.getItem("delegated-admin:apiToken");if(sessionStorage.removeItem("delegated-admin:apiToken"),t)return A(e,t);else return}}function O(e){return{type:C.D,meta:{onSuccess:e},payload:{promise:u.a.get("/api/me",{responseType:"json",timeout:5e3,headers:{"Content-Type":"application/json"}})}}}function L(e){return function(t){return t({type:C.fb,meta:{onSuccess:function(r){return t(function(e,t){var r=_.get(e,"data.settings",{}),n=Promise.resolve({data:{}});if(r.languageDictionary)if(_.isObject(r.languageDictionary))n=Promise.resolve({data:r.languageDictionary});else if(_.isString(r.languageDictionary)&&r.languageDictionary.startsWith("http")){var o=u.a.defaults.headers.common.Authorization,a=u.a.defaults.headers.common["dae-locale"];delete u.a.defaults.headers.common.Authorization,delete u.a.defaults.headers.common["dae-locale"],n=u.a.get(r.languageDictionary,{responseType:"json"}).then(function(e){if(e.data)return e;else return Promise.reject(new Error("Language Dictionary endpoint: ".concat(r.languageDictionary," returned no data")))}),u.a.defaults.headers.common.Authorization=o,u.a.defaults.headers.common["dae-locale"]=a}return{type:C.P,meta:{onSuccess:function(){return t&&t(e)}},payload:{promise:n}}}(r,e))}},payload:{promise:u()("/api/settings",{responseType:"json"})}})}}function j(){return function(e,t){var r=t().settings.get("record").toJS();r=r.settings||r||{};var n="true"===localStorage.getItem("delegated-admin:use-alt-css"),o=n?r.css:r.altcss;localStorage.setItem("delegated-admin:use-alt-css",(!n).toString()),e({type:C.sc,payload:{useAlt:!n,path:o}})}}function k(){return function(e,t){var r=t().settings.get("record").toJS();r=r.settings||r||{};var n="true"===localStorage.getItem("delegated-admin:use-alt-css"),o=!n?r.css:r.altcss;e({type:C.Db,payload:{useAlt:n,path:o}})}}var U=r(15),I=r.n(U),N=r(17),q=r.n(N),M=r(16),x=r.n(M),B=r(18),J=r.n(B),H=r(19),V=r.n(H),G=r(14),K=r.n(G),W=r(20),z=r.n(W),Q=r(2),Y=r.n(Q),Z=r(1),X=r.n(Z);function $(){return{type:C.H,payload:{promise:u.a.get("/api/applications",{responseType:"json"})}}}function ee(){return{type:C.L,payload:{promise:u.a.get("/api/connections",{responseType:"json"})}}}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:C.U,meta:{page:e},payload:{promise:u.a.get("/api/logs",{params:{page:e},responseType:"json"})}}}function re(e){return{type:C.T,meta:{logId:e},payload:{promise:u.a.get("/api/logs/".concat(e),{responseType:"json"})}}}function ne(){return{type:C.q}}var oe,ae=r(21),ie=r(25),se={error:null,loading:!1,requesting:!1,user:null},ce=Object(ie.a)(Object(ae.fromJS)(se),(oe={},Y()(oe,C.hc,function(e,t){return e.merge({user:t.user,requesting:!0})}),Y()(oe,C.l,function(e){return e.merge(I()({},se))}),Y()(oe,C.Ub,function(e){return e.merge({loading:!0})}),Y()(oe,C.Vb,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(oe,C.Tb,function(e){return e.merge(I()({},se))}),oe)),le=function(e,t){if((t=t||{}).requiredErrorText)return"".concat(e,"?requiredErrorText=").concat(encodeURIComponent(t.requiredErrorText));else return e};function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(i,s){var c=s().users.toJS(),l=c.sortProperty,d=c.sortOrder,p=c.searchValue,g=c.selectedFilter,m={page:r,sortProperty:l,sortOrder:d,searchValue:p,onSuccess:a};if(m.selectedFilter=t?"":n||g,m.searchValue=t?"":e||p,o)m.sortProperty=o.property,m.sortOrder=o.order;i({type:C.kb,payload:{promise:u.a.get("/api/users",{params:{search:m.searchValue,page:r,filterBy:m.selectedFilter,sortOrder:m.sortOrder,sortProperty:m.sortProperty},responseType:"json"})},meta:m})}}function de(e,t){return function(r){r({type:C.r,meta:{user:e,onSuccess:function(){setTimeout(function(){return r(ue())},1e3),r(O())}},payload:{promise:u.a.post(le("/api/users/",t),e,{responseType:"json"})}})}}function pe(e){return function(t,r){var n=r().connections.get("records").toJS();t({type:C.bc,payload:{connection:n&&n.length&&n[0].name,memberships:e&&1===e.length?[e[0]]:[]}})}}function ge(){return{type:C.f}}function me(e,t,r){return function(n){n({type:C.zb,meta:{userId:e,user:t,onSuccess:function(){n(ye(e))}},payload:{promise:u.a.patch(le("/api/users/".concat(e),r),t,{responseType:"json"})}})}}function fe(e){return function(t){t({type:C.ec,payload:{user:e}})}}function he(){return{type:C.i}}function Ee(e,t){return{type:C.jb,meta:{userId:e,onSuccess:t},payload:{promise:u.a.get("/api/users/".concat(e),{headers:{"Content-Type":"application/json"},responseType:"json"})}}}function ye(e){return function(t){t(Ee(e)),t(function(e){return{type:C.tb,meta:{userId:e},payload:{promise:u.a.get("/api/users/".concat(e,"/logs"),{responseType:"json"})}}}(e)),t(function(e){return{type:C.ob,meta:{userId:e},payload:{promise:u.a.get("/api/users/".concat(e,"/devices"),{responseType:"json"})}}}(e))}}function be(e){return{type:C.ic,user:e}}function ve(){return{type:C.m}}function _e(e,t){return function(r){r({type:C.Wb,payload:{promise:u.a.delete("/api/users/".concat(e,"/multifactor/").concat(t))},meta:{userId:e,onSuccess:function(){r(Ee(e))}}})}}function Ce(e){return{type:C.ac,user:e}}function Te(){return{type:C.e}}function Se(e,t,r,n){return function(o){o({type:C.UPDATE_USER,meta:{userId:e,onSuccess:function(){if(r)r();o(Ee(e))}},payload:{promise:u.a.put(le("/api/users/".concat(e),n),t,{responseType:"json"})}})}}function De(){return function(e,t){var r=t().block.get("user").get("user_id");e({type:C.a,payload:{promise:u.a.put("/api/users/".concat(r,"/block"))},meta:{userId:r,onSuccess:function(){e(Ee(r))}}})}}function Fe(e){return{type:C.kc,user:e}}function Re(e){return{type:C.hc,user:e}}function Pe(){return{type:C.o}}function Ae(){return{type:C.l}}function we(){return function(e,t){var r=t().unblock.get("user").get("user_id");e({type:C.tc,payload:{promise:u.a.put("/api/users/".concat(r,"/unblock"))},meta:{userId:r,onSuccess:function(){e(Ee(r))}}})}}function Oe(){return function(e,t){var r=t().removeBlockedIPs.get("user").get("user_id");e({type:C.Sb,payload:{promise:u.a.delete("/api/users/".concat(r,"/blocks"))},meta:{userId:r,onSuccess:function(){e(Ee(r))}}})}}function Le(e){return{type:C.cc,user:e}}function je(){return{type:C.g}}function ke(){return function(e,t){var r=t().userDelete.toJS().user.user_id;e({type:C.v,payload:{promise:u.a.delete("/api/users/".concat(r))},meta:{userId:r,onSuccess:function(){e(Object(y.push)("/users"))}}})}}function Ue(e,t){return{type:C.gc,user:e,connection:t}}function Ie(){return{type:C.k}}function Ne(e){return function(t,r){var n=r().passwordReset.toJS(),o=n.user.user_id,a=n.connection,i=e.client?e.client.value||e.client:null;t({type:C.Ob,payload:{promise:u.a.post("/api/users/".concat(o,"/password-reset"),{connection:a,clientId:i})},meta:{userId:o}})}}function qe(e,t){return{type:C.fc,user:e,connection:t}}function Me(){return{type:C.j}}function xe(e,t){return function(r,n){var o=n().passwordChange.toJS(),a=o.user.user_id,i=o.connection;r({type:C.Kb,payload:{promise:u.a.put(le("/api/users/".concat(a,"/change-password"),t),{connection:i,password:e.password,repeatPassword:e.repeatPassword})},meta:{userId:a}})}}function Be(e,t,r){return{type:C.lc,user:e,connection:t,customField:r}}function Je(){return{type:C.p}}function He(e,t,r){return function(n,o){var a=o().user.get("record").toJS();a.username=t.username,n({type:C.Cc,meta:{user:a,onSuccess:function(){n(Ee(e))}},payload:{promise:u.a.put(le("/api/users/".concat(e,"/change-username"),r),t,{responseType:"json"})}})}}function Ve(e,t,r){return{type:C.dc,user:e,connection:t,customField:r}}function Ge(){return{type:C.h}}function Ke(e,t,r){return function(n){var o=e.user_id;e.email=t.email,n({type:C.z,meta:{user:e,onSuccess:function(){n(Ee(o))}},payload:{promise:u.a.put(le("/api/users/".concat(o,"/change-email"),r),t,{responseType:"json"})}})}}function We(e,t){return{type:C.jc,user:e,connection:t}}function ze(){return{type:C.n}}function Qe(e){return function(t){var r={user_id:e};t({type:C.mc,meta:{userId:e,onSuccess:function(){t(Ee(e))}},payload:{promise:u.a.post("/api/users/".concat(e,"/send-verification-email"),r,{responseType:"json"})}})}}function Ye(e){return{type:C.bb,payload:{promise:u.a.get("/api/scripts/".concat(e),{responseType:"json"})},meta:{name:e}}}function Ze(e,t){return function(r){r({type:C.xc,meta:{name:e,script:t,onSuccess:function(){if("settings"===e)return r(L())}},payload:{promise:u.a.post("/api/scripts/".concat(e),{script:t},{responseType:"json"})}})}}var Xe=r(13),$e=(r(876),function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onKeyUp",function(e){if(e&&"Enter"===e.key)e.target.click()}),Y()(K()(r),"renderTitle",function(e){if(e&&window.config.AUTH0_MANAGE_URL)return p.a.createElement("a",{className:"navbar-brand",href:window.config.AUTH0_MANAGE_URL},r.props.getDictValue("title",window.config.TITLE));else return p.a.createElement("span",{className:"navbar-brand"},r.props.getDictValue("title",window.config.TITLE))}),r}return z()(t,e),x()(t,[{key:"getName",value:function(e,t){var r=this.props.getDictValue("menuName");return(r=(r=(r=(r=r||t&&t.get("name"))||t&&t.get("nickname"))||t&&t.get("email"))||e).length>=21?r.substr(0,18)+"...":r}},{key:"getPicture",value:function(e,t){if(t&&t.get("picture"))return t.get("picture");if(t&&t.get("nickname"))return"https://cdn.auth0.com/avatars/".concat(t.get("nickname").slice(0,2).toLowerCase(),".png");else return"https://cdn.auth0.com/avatars/".concat(e.slice(0,2).toLowerCase(),".png")}},{key:"showOnFocus",value:function(){document.querySelector("#navbar-collapse li.dropdown").classList.add("open")}},{key:"hideOnBlur",value:function(){document.querySelector("#navbar-collapse li.dropdown").classList.remove("open")}},{key:"renderCssSwitcher",value:function(e){if(this.props.renderCssToggle){var t=e.toggleStyleSetDefault||"Use Default Style",r=e.toggleStyleSetAlternative||"Use Alternative Style",n=this.props.styleSettings.get("useAlt")?t:r;return p.a.createElement("li",{role:"presentation"},p.a.createElement("a",{role:"menuitem",onClick:this.props.onCssToggle,onFocus:this.showOnFocus,onBlur:this.hideOnBlur,onKeyUp:this.onKeyUp,tabIndex:"0"},n))}return""}},{key:"getMenu",value:function(e,t){if(!e)return p.a.createElement("ul",{role:"menu",className:"dropdown-menu"},this.renderCssSwitcher(t),p.a.createElement("li",{role:"presentation"},p.a.createElement("a",{role:"menuitem",onClick:this.props.onLogout,onFocus:this.showOnFocus,onBlur:this.hideOnBlur,onKeyUp:this.onKeyUp,tabIndex:"0"},t.logoutMenuItemText||"Logout")));else return p.a.createElement("ul",{role:"menu",className:"dropdown-menu"},p.a.createElement("li",{role:"presentation"},p.a.createElement(h.Link,{to:"/users",onFocus:this.showOnFocus,onBlur:this.hideOnBlur},t.usersAndLogsMenuItemText||"Users & Logs")),p.a.createElement("li",{role:"presentation"},p.a.createElement(h.Link,{to:"/configuration",onFocus:this.showOnFocus,onBlur:this.hideOnBlur},t.configurationMenuItemText||"Configuration")),this.renderCssSwitcher(t),p.a.createElement("li",{role:"presentation"},p.a.createElement("a",{role:"menuitem",onClick:this.props.onLogout,onFocus:this.showOnFocus,onBlur:this.hideOnBlur,onKeyUp:this.onKeyUp,tabIndex:"0"},t.logoutMenuItemText||"Logout")))}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.issuer,n=e.accessLevel,o=this.props.languageDictionary||{},a=3===n.role;return p.a.createElement("header",{className:"dashboard-header"},p.a.createElement("nav",{title:"header",role:"navigation",className:"navbar navbar-default"},p.a.createElement("div",{className:"container"},p.a.createElement("div",{id:"header",className:"navbar-header",style:{width:"800px"}},this.renderTitle(a)),p.a.createElement("div",{id:"navbar-collapse",className:"collapse navbar-collapse"},p.a.createElement("ul",{className:"nav navbar-nav navbar-right"},p.a.createElement("li",{className:"dropdown"},p.a.createElement("span",{role:"button","data-toggle":"dropdown","data-target":"#",className:"btn-dro btn-username"},p.a.createElement("img",{role:"presentation",src:this.getPicture(r,t),className:"picture avatar",alt:o.adminAvatarTitle||"Avatar",title:o.adminAvatarTitle||"Avatar"}),p.a.createElement("span",{className:"username-text"},this.getName(r,t)),p.a.createElement("i",{className:"icon-budicon-460"})),this.getMenu(a,o)))))))}}]),t}(d.Component));Y()($e,"propTypes",{user:X.a.object,getDictValue:X.a.func,accessLevel:X.a.object,issuer:X.a.string,onLogout:X.a.func.isRequired,onCssToggle:X.a.func.isRequired,renderCssToggle:X.a.bool,styleSettings:X.a.object.isRequired,languageDictionary:X.a.object});var et=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"getDictValue",function(e,t){var n=r.props.settings,o="";if(n.get("settings")&&n.get("settings").get("dict"))o=n.get("settings").get("dict").get(e);return o||t}),Y()(K()(r),"onLogout",function(){var e,t=r.props.settings;if(t.get("settings")&&t.get("settings").get("dict"))e=t.get("settings").get("dict").get("logoutUrl");r.props.logout(e)}),r}return z()(t,e),x()(t,[{key:"componentWillMount",value:function(){this.props.getAppSettings(),this.props.fetchApplications(),this.props.fetchConnections(),this.props.getAccessLevel(),this.props.getStyleSettings()}},{key:"render",value:function(){var e=this.props.settingsLoading,t=this.props.languageDictionary?this.props.languageDictionary.toJS():{},r=this.props.settings.get("settings")&&this.props.settings.get("settings").toJS(),n=!!(r&&r.css&&r.altcss);if(e)return p.a.createElement(Xe.LoadingPanel,{show:e});else return p.a.createElement("div",null,p.a.createElement($e,{user:this.props.user,issuer:this.props.issuer,getDictValue:this.getDictValue,onLogout:this.onLogout,onCssToggle:this.props.toggleStyleSettings,accessLevel:this.props.accessLevel.toJSON(),styleSettings:this.props.styleSettings,languageDictionary:t,renderCssToggle:n}),p.a.createElement("div",{className:"container"},p.a.createElement("div",{className:"row"},p.a.createElement("section",{className:"content-page current"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement("div",{id:"content-area",className:"tab-content"},p.a.cloneElement(this.props.children,{accessLevel:this.props.accessLevel.toJSON(),appSettings:this.props.settings.toJSON(),getDictValue:this.getDictValue})))))))}}]),t}(d.Component);Y()(et,"propTypes",{user:X.a.object,settings:X.a.object,issuer:X.a.string,logout:X.a.func,settingsLoading:X.a.bool,styleSettings:X.a.bool,fetchApplications:X.a.func.isRequired,fetchConnections:X.a.func.isRequired,getAccessLevel:X.a.func.isRequired,getAppSettings:X.a.func.isRequired,toggleStyleSettings:X.a.func.isRequired,languageDictionary:X.a.object.isRequired});var tt=Object(f.connect)(function(e){return{issuer:e.auth.get("issuer"),user:e.auth.get("user"),accessLevel:e.accessLevel.get("record"),settings:e.settings.get("record"),styleSettings:e.styleSettings,settingsLoading:e.settings.get("loading"),languageDictionary:e.languageDictionary.get("record")}},I()({logout:R},o,a,n))(et),rt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"componentWillMount",value:function(){if(this.props.auth.isAuthenticated)this.props.push(this.props.auth.returnTo||"/users");else if(!this.props.auth.isAuthenticating&&!this.props.auth.error)this.props.login(this.props.location.query.returnUrl,window.config.LOCALE||"en")}},{key:"login",value:function(){this.props.login(this.props.location.query.returnUrl,window.config.LOCALE||"en")}},{key:"render",value:function(){var e=this.props,t=e.auth,r=e.languageDictionary;if(t.error)return p.a.createElement("div",{className:"row"},p.a.createElement(Xe.Confirm,{dialogClassName:"login-error",confirmMessage:r.loginErrorButtonText||"Login",loading:!1,title:r.loginErrorTitle||"Login Error",show:this.props.auth.error,onConfirm:this.login.bind(this)},p.a.createElement(Xe.Error,{show:!0,message:this.props.auth.error})));if(!t.isAuthenticating)return p.a.createElement("div",null);else return p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12 wrapper"},p.a.createElement(Xe.LoadingPanel,null)))}}]),t}(d.Component);Y()(rt,"propTypes",{login:X.a.func.isRequired,push:X.a.func.isRequired,auth:X.a.object.isRequired,location:X.a.object.isRequired,languageDictionary:X.a.object.isRequired});var nt=Object(f.connect)(function(e){return{auth:e.auth.toJS(),languageDictionary:e.languageDictionary.get("record").toJS()}},{login:D,push:y.push})(rt),ot=r(23),at=r(10),it=r.n(at),st=r(12),ct=r.n(st),lt=function(e,t,r){t=t||[];var n=it.a.find(t,{property:"name"});if(n)return dt(e,n,r);else return e&&(e.name||e.user_name||e.email)},ut=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=it.a.assign({},r,r[e]);return dt(t,a,n,o)},dt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e||0===e.size)return null;if(it.a.isFunction(t.display))try{return t.display(e,it.a.at(e,t.property),r,n)}catch(e){return null}var o=function(e,t){var r,n,o=t.split(".");for(r=0,n=o.length;r<n;r++){if(!e.hasOwnProperty(o[r]))return;e=e[o[r]]}return e}(e,t.property);if(void 0===o)return null;if(t.type&&"elapsedTime"===t.type)o=ct()(o).locale(r.momentLocale||"en").fromNow();if(it.a.isObject(o))o=JSON.stringify(o);if(it.a.isBoolean(o))o=o?r.trueLabel||"TRUE":r.falseLabel||"FALSE";return o},pt=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i={};if(e)t.forEach(function(t){var s=it.a.find(r,{property:t});if(!s){if(e[t])i[t]=e[t]}else{var c=ut(n,e,s,o,a);if(c)i[t]=c}});return i},gt=function(e,t,r){return t?new Date(e).toLocaleString(r||"en",{timeZone:t}):e},mt={defaultErrorMessage:"Unknown Error",FETCH_ACCESS_LEVEL:{default:"An error occurred while loading the settings: {message}"},FETCH_APPLICATIONS:{default:"An error occurred while loading the applications: {message}"},BLOCK_USER:{default:"An error occurred while blocking the user: {message}"},FETCH_CONNECTIONS:{default:"An error occurred while loading the connections: {message}"},EMAIL_CHANGE:{default:"An error occurred while changing the email: {message}"},FIELDS_CHANGE:{default:"An error occurred while changing the users fields: {message}"},FETCH_LANGUAGE_DICTIONARY:{default:"An error occurred while loading the language dictionary: {message}"},FETCH_LOG:{default:"An error occurred while loading the log record: {message}"},FETCH_LOGS:{default:"An error occurred while loading the logs list: {message}"},REMOVE_MULTIFACTOR:{default:"An error occurred while removing multi factor authentication for the user: {message}"},PASSWORD_CHANGE:{default:"An error occurred while changing the password: {message}"},PASSWORD_RESET:{default:"An error occurred while resetting the password: {message}"},FETCH_SCRIPT:{default:"An error occurred while loading the script: {message}"},UPDATE_SCRIPT:{default:"An error occurred while saving the script: {message}"},FETCH_SETTINGS:{default:"An error occurred while loading the settings: {message}"},UNBLOCK_USER:{default:"An error occurred while unblocking the user: {message}"},REMOVE_BLOCKS:{default:"An error occurred while removing anomaly blocks: {message}"},FETCH_USER_LOGS:{default:"An error occurred while loading the user logs: {message}"},FETCH_USER_DEVICES:{default:"An error occurred while loading the user devices: {message}"},FETCH_USER:{default:"An error occurred while loading the user: {message}"},CREATE_USER:{default:"An error occurred while creating the user: {message}"},DELETE_USER:{default:"An error occurred while deleting the user: {message}"},USERNAME_CHANGE:{default:"An error occurred while changing the username: {message}"},FETCH_USERS:{default:"An error occurred while loading the users list: {message}"},RESEND_VERIFICATION_EMAIL:{default:"An error occurred while sending verification email: {message}"}},ft=function(e,t,r){var n=(e=e||{}).errors||{};if(!t)return null;t=t.toJS?t.toJS():t;var o=Object.assign({},mt,n),a=o[t.type]&&o[t.type][t.status]||o[t.type].default;if(r)return a.replace("{message}",r(t,e)||o.defaultErrorMessage);else return a.replace("{message}",t.message||o.defaultErrorMessage)},ht=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props,t=e.logId,r=e.error,n=e.loading,o=e.onClose,a=e.settings;if(null===t)return p.a.createElement("div",null);var i=this.props.languageDictionary||{},s=this.props.log.toJS();s.date=gt(s.date,i.timeZone,i.momentLocale);var c=it.a.get(i,"logTypes.".concat(s.shortType,".event"),s.type);return p.a.createElement(ot.f,{show:null!==t,onHide:o},p.a.createElement(ot.f.Header,{closeButton:!n},p.a.createElement(ot.f.Title,null,i.logDialogTitleText||"Log"," - ",p.a.createElement("span",null,c||i.logDialogDefaultLogRecordText||"Log Record"))),p.a.createElement(ot.f.Body,null,p.a.createElement(Xe.LoadingPanel,{show:n,spinnerStyle:{height:"16px",width:"16px"},animationStyle:{paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"10px"}},p.a.createElement(Xe.Error,{title:i.errorTitle,message:ft(i,r,a.errorTranslator)},p.a.createElement(Xe.Json,{jsonObject:s})))),p.a.createElement(ot.f.Footer,null,p.a.createElement(ot.b,{disabled:n,onClick:o},p.a.createElement("i",{className:"icon icon-budicon-501"})," ",i.closeButtonText||"Close")))}}]),t}(d.Component);Y()(ht,"propTypes",{onClose:X.a.func.isRequired,log:X.a.object.isRequired,settings:X.a.object.isRequired,error:X.a.string,loading:X.a.bool.isRequired,logId:X.a.string,languageDictionary:X.a.object});var Et=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.logs!==this.props.logs||e.loading!==this.props.loading}},{key:"render",value:function(){var e=this,t=this.props,r=t.error,n=t.loading,o=t.settings,a=this.props.languageDictionary||{},i=o&&!0===o.suppressRawData;if(!r&&0===this.props.logs.size)return p.a.createElement("div",null,a.noLogsMessage||"No logs found");var s=this.props.logs.toJS();return p.a.createElement(Xe.LoadingPanel,{show:n,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:a.errorTitle,message:ft(a,r,o.errorTranslator)}),p.a.createElement(Xe.Table,null,p.a.createElement(Xe.TableHeader,null,p.a.createElement(Xe.TableColumn,{width:"3%"}),p.a.createElement(Xe.TableColumn,{width:"20%"},a.logEventColumnHeader||"Event"),p.a.createElement(Xe.TableColumn,{width:"25%"},a.logDescriptionColumnHeader||"Description"),p.a.createElement(Xe.TableColumn,{width:"12%"},a.logDateColumnHeader||"Date"),p.a.createElement(Xe.TableColumn,{width:"15%"},a.logConnectionColumnHeader||"Connection"),p.a.createElement(Xe.TableColumn,{width:"15%"},a.logApplicationColumnHeader||"Application")),p.a.createElement(Xe.TableBody,null,s.map(function(t,r){var n=t.type.icon,o=i?null:function(){return e.props.onOpen(t._id)},s=it.a.get(a,"logTypes.".concat(t.shortType,".event"),t.type.event),c=it.a.get(a,"logTypes.".concat(t.shortType,".description"),a.logTableDefaultLogRecordDescription||t.description||t.type.description),l=e.props.isUserLogs?c||t.user_name:t.user_name||c;return t.time_ago=ct()(t.date).locale(a.momentLocale||"en").fromNow(),p.a.createElement(Xe.TableRow,{key:r},p.a.createElement(Xe.TableIconCell,{color:n.color,icon:n.name,title:s}),p.a.createElement(Xe.TableTextCell,{onClick:o},s||a.logDialogDefaultLogRecordText||"Log Record"),p.a.createElement(Xe.TableTextCell,null,l),p.a.createElement(Xe.TableTextCell,null,t.time_ago),p.a.createElement(Xe.TableTextCell,null,t.connection||a.notApplicableLabel||"N/A"),p.a.createElement(Xe.TableTextCell,null,t.client_name||a.notApplicableLabel||"N/A"))}))))}}]),t}(d.Component);Y()(Et,"propTypes",{onOpen:X.a.func.isRequired,error:X.a.string,loading:X.a.bool.isRequired,logs:X.a.object.isRequired,settings:X.a.object.isRequired,isUserLogs:X.a.bool,languageDictionary:X.a.object});var yt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props.role>=2,t=this.props.languageDictionary||{};return p.a.createElement("div",{className:"widget-title title-with-nav-bars"},p.a.createElement("ul",{className:"nav nav-tabs"},p.a.createElement(Xe.TabPane,{title:t.userUsersTabTitle||"Users",route:"users"}),e?p.a.createElement(Xe.TabPane,{title:t.userLogsTabTitle||"Logs",route:"logs"}):null))}}]),t}(d.Component);Y()(yt,"propTypes",{role:X.a.number,languageDictionary:X.a.object});var bt=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"refresh",function(){r.props.fetchLogs()}),Y()(K()(r),"loadMore",function(){r.props.fetchLogs(r.props.logs.nextPage)}),r}return z()(t,e),x()(t,[{key:"componentWillMount",value:function(){this.props.fetchLogs()}},{key:"createToolbar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,t=this.props.languageDictionary;if(e&&(!this.props.logs.records||this.props.logs.records.size<=20))return p.a.createElement("div",null);else return p.a.createElement(ot.c,{className:"pull-right"},p.a.createElement(ot.b,{bsSize:"small",onClick:this.refresh,disabled:this.props.logs.loading},p.a.createElement("i",{className:"icon icon-budicon-257"})," ",t.logsRefreshButtonText||"Refresh"),p.a.createElement(ot.b,{bsStyle:"primary",bsSize:"small",disabled:this.props.logs.loading,onClick:this.loadMore},p.a.createElement("i",{className:"icon icon-budicon-686"})," ",t.logsLoadMoreButtonText||"Load More"))}},{key:"render",value:function(){var e=this.props,t=e.log,r=e.logs,n=e.accessLevel,o=e.languageDictionary,a=e.settings,i=a.dict&&a.dict.title||window.config.TITLE||"User Management";return document.title="".concat(o.userLogsTabTitle||"Logs"," - ").concat(i),p.a.createElement("div",null,p.a.createElement(yt,{role:n.role,languageDictionary:o}),p.a.createElement(ht,{onClose:this.props.clearLog,error:t.error,loading:t.loading,log:t.record,logId:t.id,settings:a,languageDictionary:o}),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12 wrapper"},this.createToolbar(!1))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12 wrapper"},p.a.createElement(Xe.Error,{title:o.errorTitle,message:ft(o,r.error,a.errorTranslator)}),p.a.createElement(Xe.LoadingPanel,{show:r.loading},p.a.createElement(Et,{onOpen:this.props.fetchLog,loading:r.loading,logs:r.records,settings:a,languageDictionary:o})))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12 wrapper"},this.createToolbar(!0))))}}]),t}(d.Component);Y()(bt,"propTypes",{clearLog:X.a.func.isRequired,fetchLog:X.a.func.isRequired,fetchLogs:X.a.func.isRequired,log:X.a.object,accessLevel:X.a.object,logs:X.a.object.isRequired,settings:X.a.object.isRequired,languageDictionary:X.a.object.isRequired});var vt=Object(f.connect)(function(e){return{logs:{error:e.logs.get("error"),loading:e.logs.get("loading"),records:e.logs.get("records"),total:e.logs.get("total"),nextPage:e.logs.get("nextPage")},log:{record:e.log.get("record"),id:e.log.get("logId"),error:e.log.get("error"),loading:e.log.get("loading")},settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary.get("record").toJS()}},i)(bt);var _t,Ct,Tt=r(35),St=r.n(Tt),Dt=(r(947),function(e,t,r){var n=/^([^{]*){([^}]*)}(.*)$/.exec(e);if(n&&n[2].trim()===t)return"".concat(n[1]).concat(r).concat(n[3]);else return"".concat(e).concat(r)}),Ft=St()((Ct=_t=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.blockUser()}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.block!==this.props.block||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelBlockUser,r=e.settings,n=this.props.block.toJS(),o=n.user,a=n.error,i=n.requesting,s=n.loading,c=r.userFields||[],l=this.props.languageDictionary.get("record").toJS(),u=l.blockDialogMessage||"Do you really want to block {username}? After doing so the user will not be able to sign in anymore.",d=Dt(u,"username",lt(o,c,l));return p.a.createElement(Xe.Confirm,{title:l.blockDialogTitle||"Block User?",show:i,loading:s,confirmMessage:l.dialogConfirmText,cancelMessage:l.dialogCancelText,onCancel:t,onConfirm:this.onConfirm,closeLabel:l.closeButtonText},p.a.createElement(Xe.Error,{title:l.errorTitle,message:ft(l,a,r.errorTranslator)}),p.a.createElement("p",null,d))}}]),t}(d.Component),Y()(_t,"stateToProps",function(e){return{block:e.block,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(_t,"actionsToProps",I()({},s)),Y()(_t,"propTypes",{cancelBlockUser:X.a.func.isRequired,blockUser:X.a.func.isRequired,block:X.a.object.isRequired,settings:X.a.object.isRequired,languageDictionary:X.a.object}),Ct)),Rt=function(e){function t(e){var r;if(q()(this,t),r=J()(this,V()(t).call(this,e)),Y()(K()(r),"getDeleteAction",function(e,t){if(it.a.filter(r.props.userFields,function(e){return"delete"===e.property&&!1===e.edit}).length>0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.deleteUser},r.state.languageDictionary.deleteUserMenuItemText||"Delete User")}),Y()(K()(r),"getChangeFieldsAction",function(e,t){if(!r.props.userFields||!r.props.userFields.length)return null;if(it.a.filter(r.props.userFields,function(e){return!it.a.includes(C.qc,e.property)&&e.edit}).length<=0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.changeFields},r.state.languageDictionary.changeFieldsMenuItemText||"Change Profile")}),Y()(K()(r),"getResetPasswordAction",function(e,t){if(!r.state.databaseConnections||!r.state.databaseConnections.length)return null;var n=it.a.filter(r.props.userFields,function(e){return"password"===e.property&&!1===e.edit}),o=it.a.filter(r.props.userFields,function(e){return"resetPassword"===e.property&&!0===e.edit});if(n.length>0&&o.length<=0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.resetPassword},r.state.languageDictionary.resetPasswordMenuItemText||"Reset Password")}),Y()(K()(r),"getChangePasswordAction",function(e,t){if(!r.state.databaseConnections||!r.state.databaseConnections.length)return null;if(it.a.filter(r.props.userFields,function(e){return"password"===e.property&&!1===e.edit}).length>0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.changePassword},r.state.languageDictionary.changePasswordMenuItemText||"Change Password")}),Y()(K()(r),"getChangeUsernameAction",function(e,t){if(!r.state.databaseConnections||!r.state.databaseConnections.length||!e.username)return null;if(it.a.filter(r.props.userFields,function(e){return"username"===e.property&&!1===e.edit}).length>0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.changeUsername},r.state.languageDictionary.changeUsernameMenuItemText||"Change Username")}),Y()(K()(r),"getChangeEmailAction",function(e,t){if(!r.state.databaseConnections||!r.state.databaseConnections.length)return null;if(it.a.filter(r.props.userFields,function(e){return"email"===e.property&&!1===e.edit}).length>0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.changeEmail},r.state.languageDictionary.changeEmailMenuItemText||"Change Email")}),Y()(K()(r),"getResendEmailVerificationAction",function(e,t){if(!r.state.databaseConnections||!r.state.databaseConnections.length||e.email_verified)return null;if(it.a.filter(r.props.userFields,function(e){return"email_verified"===e.property&&!1===e.edit}).length>0)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.resendVerificationEmail},r.state.languageDictionary.resendVerificationEmailMenuItemText||"Resend Verification Email")}),Y()(K()(r),"getMultifactorAction",function(e,t){if(!e.multifactor||!e.multifactor.length)return null;else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.removeMfa},r.state.languageDictionary.removeMfaMenuItemText||"Remove MFA")}),Y()(K()(r),"getBlockedAction",function(e,t){if(e.blocked)return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.unblockUser},r.state.languageDictionary.unblockUserMenuItemText||"Unblock User");else return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.blockUser},r.state.languageDictionary.blockUserMenuItemText||"Block User")}),Y()(K()(r),"getUserBlocksAction",function(e,t){if(e.blocked_for&&e.blocked_for.length)return p.a.createElement(ot.e,{disabled:t||!1,onClick:r.removeBlockedIPs},r.state.languageDictionary.removeBlockedIPsMenuItemText||"Unblock for all IPs");else return null}),Y()(K()(r),"deleteUser",function(){r.props.deleteUser(r.state.user)}),Y()(K()(r),"changeFields",function(){var e=r.props.languageDictionary,t=["username","memberships","connection","password","email","repeatPassword"],n=it.a.filter(r.props.userFields,function(e){return!it.a.includes(t,e.property)&&e.edit&&it.a.isFunction(e.edit.display)}),o=Object.assign({},r.state.user);it.a.each(n,function(t){try{it.a.update(o,t.property,function(n){return t.edit.display(r.state.user,n,e)})}catch(e){}}),r.props.changeFields(o)}),Y()(K()(r),"resetPassword",function(){r.props.resetPassword(r.state.user,r.state.databaseConnections[0])}),Y()(K()(r),"changePassword",function(){r.props.changePassword(r.state.user,r.state.databaseConnections[0])}),Y()(K()(r),"changeUsername",function(){var e=it.a.filter(r.props.userFields,function(e){return"username"===e.property&&!1!==e.edit&&e.edit});r.props.changeUsername(r.state.user,r.state.databaseConnections[0],t.getDisplayObject(r.state.user,e))}),Y()(K()(r),"changeEmail",function(){var e=it.a.filter(r.props.userFields,function(e){return"email"===e.property&&!1!==e.edit&&e.edit});r.props.changeEmail(r.state.user,r.state.databaseConnections[0],t.getDisplayObject(r.state.user,e))}),Y()(K()(r),"resendVerificationEmail",function(){r.props.resendVerificationEmail(r.state.user,r.state.databaseConnections[0])}),Y()(K()(r),"blockUser",function(){r.props.blockUser(r.state.user)}),Y()(K()(r),"unblockUser",function(){r.props.unblockUser(r.state.user)}),Y()(K()(r),"removeBlockedIPs",function(){r.props.removeBlockedIPs(r.state.user)}),Y()(K()(r),"removeMfa",function(){r.props.removeMfa(r.state.user)}),e.user){if(r.state={user:e.user.toJS(),loading:e.loading},e.databaseConnections)r.state.databaseConnections=e.databaseConnections.toJS()}else r.state={user:null,loading:!1};return r.state.languageDictionary=e.languageDictionary||{},r}return z()(t,e),x()(t,[{key:"componentWillReceiveProps",value:function(e){if(e.user){var t=e.user.toJS(),r=t.record,n=t.loading;this.setState({user:r,loading:n})}if(e.databaseConnections)this.setState({databaseConnections:e.databaseConnections.toJS()});if(e.languageDictionary)this.setState({languageDictionary:e.languageDictionary})}},{key:"render",value:function(){if(!this.state.user||this.props.role<1)return null;var e=(this.props.languageDictionary||{}).userActionsButton||"Actions";return p.a.createElement(ot.d,{bsStyle:"success",title:e,id:"user-actions"},this.getMultifactorAction(this.state.user,this.state.loading),this.getBlockedAction(this.state.user,this.state.loading),this.getUserBlocksAction(this.state.user,this.state.loading),this.getResetPasswordAction(this.state.user,this.state.loading),this.getResendEmailVerificationAction(this.state.user,this.state.loading),this.getChangeUsernameAction(this.state.user,this.state.loading),this.getChangeEmailAction(this.state.user,this.state.loading),this.getChangePasswordAction(this.state.user,this.state.loading),this.getChangeFieldsAction(this.state.user,this.state.loading),this.getDeleteAction(this.state.user,this.state.loading))}}],[{key:"getDisplayObject",value:function(e,t){if(t.length>0){var r=void 0;if(it.a.isFunction(t[0].edit.display))r=t[0].edit.display;else if(!t[0].edit.display&&!1!==t[0].edit.display&&it.a.isFunction(t[0].display))r=t[0].display;if(r)return{display:r,user:e}}return null}}]),t}(d.Component);Y()(Rt,"propTypes",{blockUser:X.a.func.isRequired,changeEmail:X.a.func.isRequired,changePassword:X.a.func.isRequired,changeUsername:X.a.func.isRequired,databaseConnections:X.a.object.isRequired,deleteUser:X.a.func.isRequired,changeFields:X.a.func.isRequired,removeMfa:X.a.func.isRequired,resendVerificationEmail:X.a.func.isRequired,resetPassword:X.a.func.isRequired,unblockUser:X.a.func.isRequired,removeBlockedIPs:X.a.func.isRequired,user:X.a.object.isRequired,role:X.a.number.isRequired,userFields:X.a.array.isRequired,languageDictionary:X.a.object});var Pt=r(57),At=r(509),wt=r.n(At),Ot=function(){function e(t){q()(this,e),this.languageDictionary=t}return x()(e,[{key:"requiredValidationFunction",value:function(e){var t=(this.languageDictionary||{}).requiredErrorText||"required";return!e||""===e?t:!1}}]),e}(),Lt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"getFieldComponent",value:function(e,t,r){var n=this.props.languageDictionary||{},o=n.requiredFieldLabel||" (required)",a=n.labels&&n.labels[e.property]||e.label;return p.a.createElement(Pt.a,wt()({name:e.property,type:e.type,label:a+(e.required?o:""),placeholder:e.placeholder,component:t},r))}},{key:"getFieldByComponentName",value:function(e,t){var r,n,o=this,a=e.required||e.validationFunction?[]:void 0;if(e.required)a.push((r=this.props.languageDictionary||{},(n=new Ot(r)).requiredValidationFunction.bind(n)));if(e.validationFunction)a.push(function(t,r,n){return e.validationFunction(t,r,n,o.props.languageDictionary||{})});switch(t){case"InputCombo":var i={options:e.options?it.a.map(e.options,function(e){return{value:e.value,text:e.label}}):null};if(a)i.validate=a;return this.getFieldComponent(e,Xe.InputCombo,i);case"InputMultiCombo":var s={loadOptions:function(t,r){return r(null,{options:e.options||[],complete:!0})},multi:!0,displayLabelOnly:e.displayLabelOnly};if(a)s.validate=a;return this.getFieldComponent(e,Xe.Multiselect,s);case"InputSelectCombo":var c={loadOptions:function(t,r){return r(null,{options:e.options||[],complete:!0})},multi:!1};if(a)c.validate=a;return this.getFieldComponent(e,Xe.Select,c);case"InputVirtualizedSelect":var l={options:e.options,multi:e.multi,displayLabelOnly:e.displayLabelOnly};if(a)l.validate=a;return this.getFieldComponent(e,Xe.VirtualizedSelect,l);default:var u={disabled:e.disabled||!1};if(a)u.validate=a;return this.getFieldComponent(e,Xe.InputText,u)}}},{key:"render",value:function(){var e=this.props,t=e.field,r=e.isEditField?"edit":"create";if(t.disable)return null;if(!t.property||!t[r])return null;if(!t.label)t.label=t.property;if("hidden"===t[r].type)t.label="";if(!it.a.isFunction(t[r].validationFunction)&&t[r].validationFunction)delete t[r].validationFunction;var n=it.a.isBoolean(t[r])?Object.assign({},t,{type:"text",component:"InputText"}):Object.assign({},t,t[r]);return p.a.createElement("div",null,this.getFieldByComponentName(n,n.component))}}]),t}(d.Component);Y()(Lt,"propTypes",{field:X.a.object.isRequired,isEditField:X.a.bool.isRequired,languageDictionary:X.a.object});var jt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.fields,n=t.isEditForm;return p.a.createElement("div",null,it.a.map(r,function(t,r){return p.a.createElement(Lt,{key:r,field:t,isEditField:n,languageDictionary:e.props.languageDictionary})}))}}]),t}(d.Component);Y()(jt,"propTypes",{fields:X.a.array.isRequired,isEditForm:X.a.bool.isRequired,languageDictionary:X.a.object});var kt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props.customFields||[];if(0===e.length)return null;var t=this.props.languageDictionary||{},r=it.a.filter(e,function(e){return!it.a.includes(C.qc,e.property)&&e.edit});if(0===r.length)return null;var n=this.props.loading;return p.a.createElement("div",null,p.a.createElement(ot.f.Body,null,this.props.children,p.a.createElement("div",{className:"form-horizontal"},p.a.createElement(jt,{isEditForm:!0,fields:r,languageDictionary:t}))),p.a.createElement(ot.f.Footer,null,p.a.createElement(ot.b,{bsSize:"large",bsStyle:"default",disabled:n,onClick:this.props.onClose},t.cancelButtonText||"Cancel"),p.a.createElement(ot.b,{bsSize:"large",bsStyle:"primary",disabled:n,onClick:this.props.handleSubmit},n?t.savingText||"Saving....":t.updateButtonText||"Update")))}}]),t}(d.Component);Y()(kt,"propTypes",{initialValues:X.a.object,getDictValue:X.a.func,onClose:X.a.func.isRequired,handleSubmit:X.a.func.isRequired,submitting:X.a.bool,customFields:X.a.array,languageDictionary:X.a.object,loading:X.a.bool});var Ut=Object(Pt.d)({form:"user"})(kt),It=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.devices!==this.props.devices||e.user!==this.props.user||e.loading!==this.props.loading}},{key:"render",value:function(){var e=this.props,t=e.error,r=e.loading,n=e.settings;if(r)return p.a.createElement("div",null);var o=this.props.languageDictionary||{};if(!t&&0===this.props.devices.size)return p.a.createElement("div",null,o.noDevicesMessage||"This user does not have any registered devices.");var a=this.props.devices.toJS();return p.a.createElement(Xe.LoadingPanel,{show:r,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:o.errorTitle,message:ft(o,t,n.errorTranslator)}),p.a.createElement(Xe.Table,null,p.a.createElement(Xe.TableHeader,null,p.a.createElement(Xe.TableColumn,{width:"3%"}),p.a.createElement(Xe.TableColumn,{width:"70%"},o.deviceNameColumnHeader||"Device"),p.a.createElement(Xe.TableColumn,{width:"27%"},o.deviceNumberTokensColumnHeader||"# of Tokens/Public Keys")),p.a.createElement(Xe.TableBody,null,Object.keys(a).sort().map(function(e){return p.a.createElement(Xe.TableRow,{key:e},p.a.createElement(Xe.TableIconCell,{color:"green",icon:"243"}),p.a.createElement(Xe.TableTextCell,null,e),p.a.createElement(Xe.TableTextCell,null,a[e]))}))))}}]),t}(d.Component);Y()(It,"propTypes",{user:X.a.object,error:X.a.string,devices:X.a.object.isRequired,loading:X.a.bool.isRequired,settings:X.a.object.isRequired,languageDictionary:X.a.object});var Nt=function(e,t,r,n){var o=it.a.find(t,{property:r});if(o)if(it.a.isBoolean(o[e])&&!1===o[e])return it.a.remove(t,{property:r});else return it.a.defaults(o,n);return t.unshift(n)},qt=function(e,t,r,n,o){var a=e?"edit":"create",i=it.a.find(r,function(e){return e.name===n}),s=!((i&&i.options?i.options.requires_username:!1)||o&&o.username),c=Y()({property:"username",label:"Username",disable:s},a,{type:"text",required:!0});return Nt(a,t,"username",c)},Mt=function(e,t,r,n){var o=e?"edit":"create";if(!r||!n||n.length<2)return it.a.remove(t,{property:"connection"});var a=Y()({property:"connection",label:"Connection"},o,{type:"text",disabled:!0});Nt(o,t,"connection",a);var i=it.a.find(t,{property:"connection"});if(i&&(it.a.isObject(i[o])&&!0!==i[o].disabled||it.a.isBoolean(i[o])))i[o]=a[o]},xt=function(e,t){var r=e?"edit":"create",n=Y()({property:"repeatPassword",label:"Repeat Password"},r,{required:!0,type:"password",component:"InputText",validationFunction:function(e,t){return e!==t.password?"passwords must match":!1}}),o=Y()({property:"password",label:"Password"},r,{required:!0,type:"password",component:"InputText"});Nt(r,t,"repeatPassword",n),Nt(r,t,"password",o)},Bt=function(e,t){var r=e?"edit":"create",n=Y()({property:"email",label:"Email"},r,{type:"text",component:"InputText",required:!0});Nt(r,t,"email",n)},Jt=function(e,t){var r=e?"edit":"create",n=Y()({property:"email",label:"Email"},r,{type:"text",component:"InputText",disabled:!0});Nt(r,t,"email",n);var o=it.a.find(t,{property:"email"});if(o&&(it.a.isObject(o[r])&&!0!==o[r].disabled||it.a.isBoolean(o[r])))o[r]=n[r]},Ht=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.customFields),r=e.connections,n=e.hasSelectedConnection,o=e.initialValues,a=e.hasMembership,i=e.memberships,s=e.createMemberships,c=e.getDictValue,l=e.loading,u=this.props.languageDictionary||{},d=it.a.cloneDeep(t)||[];!function(e,t,r,n){var o=e?"edit":"create";if(!r||r.length<=1)return it.a.remove(t,{property:"connection"});var a=Y()({property:"connection",label:"Connection"},o,{required:!0,type:"select",component:"InputCombo",options:r.map(function(e){return{value:e.name,label:e.name}}),onChange:n});Nt(o,t,"connection",a)}(!1,d,r,this.onConnectionsChange),xt(!1,d),qt(!1,d,r,n,o),Bt(!1,d),function(e,t,r,n,o,a){var i=e?"edit":"create",s=it()(n||[]).concat(r).uniq().sort().value();if(s.length<=1&&!o)return it.a.remove(t,{property:"memberships"});var c=Y()({property:"memberships",label:a("memberships","Memberships")},i,{type:"select",component:"InputMultiCombo",options:s.map(function(e){return{value:e,label:e}})});Nt(i,t,"memberships",c)}(!1,d,a,i,s,c);var g=it.a.filter(d,function(e){return e.create});return p.a.createElement("div",null,p.a.createElement(ot.f.Body,null,this.props.children,p.a.createElement("div",{className:"form-horizontal"},p.a.createElement(jt,{isEditForm:!1,fields:g,languageDictionary:u}))),p.a.createElement(ot.f.Footer,null,p.a.createElement(ot.b,{bsSize:"large",bsStyle:"default",disabled:l,onClick:this.props.onClose},u.cancelButtonText||"Cancel"),p.a.createElement(ot.b,{bsSize:"large",bsStyle:"primary",disabled:l,onClick:this.props.handleSubmit},l?u.savingText||"Saving....":u.createButtonText||"Create")))}}]),t}(d.Component);Y()(Ht,"propTypes",{initialValues:X.a.object,connections:X.a.array.isRequired,memberships:X.a.array.isRequired,createMemberships:X.a.bool,getDictValue:X.a.func,hasSelectedConnection:X.a.string,hasMembership:X.a.array,onClose:X.a.func.isRequired,handleSubmit:X.a.func.isRequired,submitting:X.a.bool,customFields:X.a.array,customFieldGetter:X.a.func.isRequired,languageDictionary:X.a.object,loading:X.a.bool});var Vt=Object(Pt.d)({form:"user"}),Gt=Object(Pt.b)("user"),Kt=Object(f.connect)(function(e){return{hasSelectedConnection:Gt(e,"connection"),hasMembership:Gt(e,"memberships")}})(Vt(Ht)),Wt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.user!==this.props.user||e.loading!==this.props.loading}},{key:"getName",value:function(e,t){var r=it.a.find(t,function(e){return"name"===e.property});if(r&&it.a.isFunction(r.display))return r.display(e);else return e.name||e.nickname||e.email}},{key:"getPicture",value:function(e,t){var r=it.a.find(t,function(e){return"picture"===e.property});if(r&&it.a.isFunction(r.display))return r.display(e);else return e.picture}},{key:"getEmail",value:function(e,t){if(!e.email)return p.a.createElement("div",null);var r=e.email,n=it.a.find(t,function(e){return"email"===e.property});if(n&&it.a.isFunction(n.display))r=n.display(e);if(!r||0===r.length)return p.a.createElement("div",null);else return p.a.createElement("span",{className:"user-label user-head-email"},r)}},{key:"render",value:function(){if(this.props.loading||this.props.error)return p.a.createElement("div",null);var e=this.props.user.toJS(),t=this.props.userFields||[],r=this.props.languageDictionary||{};return p.a.createElement("div",{className:"user-header"},p.a.createElement("img",{role:"presentation",className:"img-polaroid",src:this.getPicture(e,t),alt:r.userImageTitle||"User Image",title:r.userImageTitle||"User Image"}),p.a.createElement("div",{className:"user-bg-box",style:{position:"relative",height:"120px",overflow:"hidden"}},p.a.createElement("img",{role:"presentation",className:"user-bg",src:this.getPicture(e,t),alt:r.userImageTitle||"User Image",title:r.userImageTitle||"User Image"}),p.a.createElement("div",{className:"box-content"},p.a.createElement("div",{className:"login-count"},p.a.createElement("span",{className:"lined-text"},r.loginsCountLabel||"Logins Count:"),p.a.createElement("strong",null,e.logins_count||0)),p.a.createElement("div",{className:"username-area"},p.a.createElement("h2",null,p.a.createElement("span",{className:"name user-head-nickname"},this.getName(e,t)),this.getEmail(e,t))))))}}]),t}(d.Component);Y()(Wt,"propTypes",{error:X.a.string,loading:X.a.bool.isRequired,user:X.a.object.isRequired,userFields:p.a.PropTypes.array.isRequired,languageDictionary:p.a.PropTypes.object});r(948);var zt=function(e){function t(e){var r;return q()(this,t),r=J()(this,V()(t).call(this,e)),Y()(K()(r),"onSearch",function(e,t){r.props.onSearch(e,t,r.focusSearchResults)}),Y()(K()(r),"onKeyPress",function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;r.onSearch(t,r.state.selectedFilter.filterBy)}}),Y()(K()(r),"focusSearchResults",function(){var e=Object(g.findDOMNode)(r.refs.searchResults);(e.querySelector("a")||e.querySelector("label")).focus()}),r.searchOptions=it()(r.props.userFields).filter(function(e){return it.a.isObject(e.search)&&e.search.filter&&!0===e.search.filter}).map(function(e,t){return{title:e.label,value:e.property,filterBy:e.property,selected:0===t}}).value(),r.defaultFilter=it.a.find(r.searchOptions,{selected:!0}),r.state={searchValue:r.props.searchValue,selectedFilter:r.defaultFilter},r.onKeyPress=r.onKeyPress.bind(K()(r)),r.onReset=r.onReset.bind(K()(r)),r.onHandleOptionChange=r.onHandleOptionChange.bind(K()(r)),r}return z()(t,e),x()(t,[{key:"onReset",value:function(){this.props.onReset(),this.setState({searchValue:""})}},{key:"onHandleOptionChange",value:function(e){this.setState({selectedFilter:e})}},{key:"render",value:function(){var e=this.props,t=e.loading,r=e.sortProperty,n=e.sortOrder,o=e.error,a=e.settings,i=this.props.languageDictionary||{},s=i.labels||{},c=this.searchOptions.map(function(e){return e.title=s[e.value]||e.title||e.value,e});return p.a.createElement("div",null,p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12 wrapper"},p.a.createElement(Xe.Error,{title:i.errorTitle,message:ft(i,o,a.errorTranslator)}))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement("label",{className:"hidden-label",htmlFor:"search-bar"},i.searchBarPlaceholder||"Search for users using the Lucene syntax"),c.length>0?p.a.createElement(Xe.SearchBar,{inputId:"search-bar",onReset:this.props.onReset,enabled:!t,handleKeyPress:this.onKeyPress,handleReset:this.onReset,handleOptionChange:this.onHandleOptionChange,searchOptions:c,searchValue:this.state.searchValue,placeholder:i.searchBarPlaceholder,resetButtonText:i.searchBarReset,instructionsText:i.searchBarInstructions}):p.a.createElement($t,{inputId:"search-bar",onReset:this.props.onReset,onSearch:this.onSearch,searchValue:this.state.searchValue,enabled:!t,languageDictionary:i}))),p.a.createElement(Xe.LoadingPanel,{show:t},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12",ref:"searchResults"},p.a.createElement(Xt,{loading:t,users:this.props.users,userFields:this.props.userFields,onColumnSort:this.props.onColumnSort,sortOrder:n,sortProperty:r,languageDictionary:i})))))}}]),t}(p.a.Component);Y()(zt,"propTypes",{onReset:X.a.func.isRequired,onSearch:X.a.func.isRequired,onPageChange:X.a.func.isRequired,error:X.a.object,users:X.a.array.isRequired,loading:X.a.bool.isRequired,userFields:X.a.array.isRequired,onColumnSort:X.a.func.isRequired,sortOrder:X.a.number.isRequired,searchValue:X.a.string,sortProperty:X.a.string.isRequired,settings:X.a.object.isRequired,languageDictionary:X.a.object});var Qt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.error!==this.props.error||e.user!==this.props.user||e.loading!==this.props.loading}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.error,n=e.loading,o=e.settings,a=t.toJS();if(this.props.languageDictionary.timeZone){var i=this.props.languageDictionary.momentLocale||"en",s=this.props.languageDictionary.timeZone;a.created_at=gt(a.created_at,s,i),a.last_login=gt(a.last_login,s,i),a.multifactor_last_modified=gt(a.multifactor_last_modified,s,i),a.updated_at=gt(a.updated_at,s,i)}return p.a.createElement(Xe.LoadingPanel,{show:n,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:this.props.languageDictionary.errorTitle,message:ft(this.props.languageDictionary,r,o.errorTranslator)},p.a.createElement(Xe.Json,{jsonObject:a})))}}]),t}(d.Component);Y()(Qt,"propTypes",{error:d.PropTypes.string,loading:d.PropTypes.bool.isRequired,user:d.PropTypes.object.isRequired,settings:d.PropTypes.object.isRequired,languageDictionary:d.PropTypes.object});r(949),r(950);var Yt=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.title!==this.props.title||e.children!==this.props.children}},{key:"render",value:function(){var e=this.props,t=e.title,r=e.children;return p.a.createElement("div",{className:"user-info-field"},p.a.createElement("div",{className:"user-info-field-title"},t),p.a.createElement("span",null,r))}}]),t}(d.Component);Y()(Yt,"propTypes",{title:d.PropTypes.string.isRequired});var Zt=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"getMemberships",function(e){return(e||[]).join(", ")}),Y()(K()(r),"getIdentities",function(e){if(0===e.size)return{};else return e.get("identities").toJSON()[0]}),Y()(K()(r),"getBlocked",function(e,t){if(0===e.size)return"";else return e.get("blocked")?t.yesLabel||"Yes":t.noLabel||"No"}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.user!==this.props.user||e.memberships!==this.props.memberships||e.userFields!==this.props.userFields||e.loading!==this.props.loading||e.error!==this.props.error}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.error,n=e.loading,o=e.memberships,a=e.settings,i=this.props.languageDictionary||{},s=i.labels||{},c=it()(this.props.userFields||[]).filter(function(e){return e.display}).map(function(e){return{title:s[e.property]||e.label||e.property,property:e.property,display:e.display}}).value(),l=it()(this.props.userFields||[]).filter(function(e){return!1===e.display}).groupBy(function(e){return e.property}).value(),u=it()(c).groupBy(function(e){return e.property}).value(),d=[{title:"User ID",property:"user_id"},{title:"Name",property:"name"},{title:"Username",property:"username"},{title:"Email",property:"email"},{title:"Identity",property:"identity.connection"},{title:"Blocked",property:"isBlocked"},{title:"Last IP",property:"last_ip"},{title:"Logins Count",property:"logins_count"},{title:"Memberships",property:"currentMemberships"},{title:"Multifactor",property:"multifactor",display:function(e){return e.multifactor.join(", ")}},{title:"Signed Up",property:"created_at",type:"elapsedTime"},{title:"Updated",property:"updated_at",type:"elapsedTime"},{title:"Last Login",property:"last_login",type:"elapsedTime"}].map(function(e){return e.title=s[e.property]||e.title,e}),g=it()(d).reject(function(e){return e.property in u||e.property in l}).value(),m=it()(g).groupBy(function(e){return e.property}).value(),f=it()(u).keys().concat(Object.keys(m)).concat(Object.keys(l)).concat(["identity","identities","app_metadata","picture","user_metadata"]).value(),h=t.toJS();if(!h||0===Object.keys(h).length)return p.a.createElement(Xe.LoadingPanel,{show:n,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:i.errorTitle,message:ft(i,r,a.errorTranslator)}));h.currentMemberships=this.getMemberships(o),h.identity=this.getIdentities(t),h.isBlocked=this.getBlocked(t,i);var E=it.a.keys(it.a.omit(h,f)),y=it.a.map(E,function(e){return{title:e,property:e}}),b=it()(c).concat(g).concat(y).filter(function(e){return"picture"!==e.property}).sortBy(function(e){return e.title}).value(),v=it.a.map(b,function(e){return e.value=dt(h,e,i),e}),_=it.a.filter(v,function(e){return e.value})||[];return p.a.createElement(Xe.LoadingPanel,{show:n,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:i.errorTitle,message:ft(i,r,a.errorTranslator)}),p.a.createElement("div",{className:"user-info"},_.map(function(e,t){return p.a.createElement(Yt,{key:t,title:e.title},e.value)})))}}]),t}(d.Component);Y()(Zt,"propTypes",{error:X.a.string,loading:X.a.bool.isRequired,user:X.a.object.isRequired,settings:X.a.object.isRequired,memberships:X.a.array,userFields:X.a.array,languageDictionary:X.a.object});r(951);var Xt=function(e){function t(e){var r;q()(this,t);var n=(r=J()(this,V()(t).call(this,e))).getListFields(e);return r.state={listFields:n},r}return z()(t,e),x()(t,[{key:"getListFields",value:function(e){var t=e.userFields,r=[{listOrder:0,listSize:"6%",property:"picture",label:"",display:function(e){return e.picture||""},search:{sort:!0}},{listOrder:1,listSize:"20%",property:"name",label:"Name",display:function(e){return e.nickname||e.email||e.user_id},search:{sort:!0}},{listOrder:2,listSize:"29%",property:"email",label:"Email",display:function(e){return e.email||"N/A"}},{listOrder:3,listSize:"15%",property:"last_login_relative",sortProperty:"last_login",label:"Latest Login",search:{sort:!0}},{listOrder:4,listSize:"15%",property:"logins_count",label:"Logins",search:{sort:!0}}],n=it.a.find(t,{property:"connection"});if(!n)r.push({listOrder:5,listSize:"25%",property:"identities",label:"Connection",display:function(e){return e.identities[0].connection}});else if(it.a.isFunction(n.display)||it.a.isBoolean(n.display)&&!0===n.display)r.push({listOrder:5,listSize:"25%",property:"identities",label:"Connection",display:function(e){return it.a.isFunction(n.display)?n.display(e):e.identities[0].connection}});var o=r;if(t.length>0){var a=it()(t).filter(function(e){return it.a.isObject(e.search)||it.a.isBoolean(e.search)&&!0===e.search}).map(function(e){if(it.a.isBoolean(e.search)&&!0===e.search){return Object.assign({},e,{listOrder:1e3,listSize:"25%"})}return Object.assign({},e,e.search)}).value();if(Array.isArray(a)&&a.length>0){var i=it()(t).filter(function(e){return it.a.isObject(e.search)||it.a.isBoolean(e.search)&&!0===e.search}).map("property").value();o=it()(r).filter(function(e){return i.indexOf(e.property)<0}).concat(a).sortBy(function(e){return e.listOrder}).filter(function(e){return!1!==e.display}).value()}var s=it()(t).filter(function(e){return!1===e.search}).map("property").value();o=it()(o).filter(function(e){return s.indexOf(e.property)<0}).value()}return o}}]),x()(t,[{key:"componentWillReceiveProps",value:function(e){if(!it.a.isEqual(this.props.userFields,e.userFields)){var t=this.getListFields(e);this.setState({listFields:t})}}},{key:"onColumnSort",value:function(e,t){var r={property:e,order:-1===t?1:-1};this.props.onColumnSort(r)}},{key:"returnToSearch",value:function(e){if(e&&"Enter"===e.key)e.target.click()}},{key:"render",value:function(){var e=this,t=this.props,r=t.users,n=t.loading,o=t.sortProperty,a=t.sortOrder,i=this.props.languageDictionary||{},s=i.labels||{},c=this.state.listFields;if(!r.length&&!n)return p.a.createElement("label",{className:"user-search-no-results",tabIndex:"0",htmlFor:"search-bar",onKeyUp:this.returnToSearch},i.userSearchNoResults||"No users found by given parameters.");else return p.a.createElement(Xe.Table,null,p.a.createElement(Xe.TableHeader,null,c.map(function(t){if(it.a.isObject(t.search)&&it.a.isBoolean(t.search.sort)&&!0===t.search.sort)return p.a.createElement(Xe.TableColumn,{key:t.property,width:t.listSize},p.a.createElement("div",{className:"table-column-div",onClick:e.onColumnSort.bind(e,t.sortProperty||t.property,a)},s[t.property]||t.label,(t.sortProperty||t.property)===o&&p.a.createElement("i",{className:-1===a?"icon-budicon-462 icon":"icon-budicon-460 icon","aria-hidden":"true"})));else return p.a.createElement(Xe.TableColumn,{key:t.property,width:t.listSize},s[t.property]||t.label)})),p.a.createElement(Xe.TableBody,null,r.map(function(e){return p.a.createElement(Xe.TableRow,{key:e.user_id},c.map(function(t,r){var n="".concat(e.user_id,"_").concat(t.property);if("picture"===t.property)return p.a.createElement(Xe.TableCell,null,p.a.createElement("img",{className:"img-circle",src:ut("search",e,t,i)||"(empty)",alt:e.name||e.user_name||e.email,title:e.name||e.user_name||e.email,width:"32"}));if("name"===t.property)return p.a.createElement(Xe.TableRouteCell,{key:n,route:"/users/".concat(e.user_id)},ut("search",e,t,i)||"(empty)");else return p.a.createElement(Xe.TableTextCell,{key:n},ut("search",e,t,i))}))})))}}]),t}(d.Component);Y()(Xt,"propTypes",{users:X.a.array.isRequired,loading:X.a.bool.isRequired,userFields:X.a.array.isRequired,onColumnSort:X.a.func.isRequired,sortOrder:X.a.number.isRequired,sortProperty:X.a.string.isRequired,languageDictionary:X.a.object});var $t=function(e){function t(e){var r;return q()(this,t),r=J()(this,V()(t).call(this,e)),Y()(K()(r),"onKeyPress",function(e){if("Enter"===e.key)r.props.onSearch(Object(g.findDOMNode)(r.refs.search).value)}),Y()(K()(r),"handleChange",function(e){r.setState({searchValue:e.target.value})}),Y()(K()(r),"onResetSearch",function(){r.setState({searchValue:""}),Object(g.findDOMNode)(r.refs.search).value="",r.props.onReset()}),Y()(K()(r),"renderInstructions",function(e){if(e)return p.a.createElement("div",{className:"help-block"},e);else return p.a.createElement("div",{className:"help-block"},"To perform your search, press ",p.a.createElement("span",{className:"keyboard-button"},"enter"),". You can also search for specific fields, eg: ",p.a.createElement("strong",null,'email:"john@doe.com"'),".")}),r.state={searchValue:e.searchValue},r.handleChange=r.handleChange.bind(K()(r)),r}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props.languageDictionary||{};return p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement("div",{className:"advanced-search-control"},p.a.createElement("span",{className:"search-area"},p.a.createElement("i",{className:"icon-budicon-489"}),p.a.createElement("input",{className:"user-input",type:"text",ref:"search",placeholder:e.searchBarPlaceholder||"Search for users using the Lucene syntax",spellCheck:"false",style:{marginLeft:"10px"},onChange:this.handleChange,onKeyPress:this.onKeyPress,value:this.state.searchValue,id:this.props.inputId||""})),p.a.createElement("span",{className:"controls pull-right"},p.a.createElement("button",{onClick:this.onResetSearch,type:"reset",disabled:!this.props.enabled},e.searchBarReset||"Reset"," ",p.a.createElement("i",{className:"icon-budicon-471"}))))),p.a.createElement("div",{className:"col-xs-12"},this.renderInstructions(e.searchBarInstructions)))}}]),t}(d.Component);Y()($t,"propTypes",{enabled:X.a.bool.isRequired,onReset:X.a.func.isRequired,onSearch:X.a.func.isRequired,languageDictionary:X.a.object,searchValue:X.a.string,inputId:X.a.string});var er=r(189),tr=r.n(er),rr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onPreviousPage",function(){r.props.onPageChange(r.props.nextPage-1)}),Y()(K()(r),"onNextPage",function(){r.props.onPageChange(r.props.nextPage+1)}),Y()(K()(r),"changePage",function(e){r.props.onPageChange(e)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.nextPage!==e.nextPage}},{key:"render",value:function(){var e=this,t=this.props,r=t.nextPage,n=t.pages;return p.a.createElement("nav",{className:"pull-right"},p.a.createElement("ul",{className:"pagination pull-right"},p.a.createElement("li",{style:{cursor:"pointer"},onClick:function(){return e.onPreviousPage()},className:r-2<0?"disabled":""},p.a.createElement("a",null,p.a.createElement("span",null,""))),tr()(Array(n)).map(function(t,n){var o=n+1;return p.a.createElement("li",{key:n,style:{cursor:"pointer"},className:r===o?"active":"",onClick:function(){return e.changePage(o)}},p.a.createElement("a",null,o))}),p.a.createElement("li",{style:{cursor:"pointer"},onClick:function(){return e.onNextPage()},className:r+1>n?"disabled":""},p.a.createElement("a",null,p.a.createElement("span",null,"")))))}}]),t}(p.a.Component);Y()(rr,"propTypes",{onPageChange:p.a.PropTypes.func.isRequired,nextPage:p.a.PropTypes.number.isRequired,pages:p.a.PropTypes.number.isRequired});var nr=r(259),or=r.n(nr),ar=(r(955),function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"getPlainFields",function(e){var t=[];return it.a.forEach(e,function(e,n){return t.push(r.getField(e,n))}),it.a.flattenDeep(t)}),Y()(K()(r),"getField",function(e,t,n){var o=n?"".concat(n,".").concat(t):t,a=it.a.find(r.props.customFields,{property:o}),i=a&&a.label||t;if("string"==typeof e)return{property:o,label:i};if("object"===or()(e)){var s=[];return it.a.forEach(e,function(e,t){return s.push(r.getField(e,t,o))}),s}}),Y()(K()(r),"renderLabel",function(e,t,r){return p.a.createElement("li",{key:r},p.a.createElement("label",{htmlFor:e},t))}),r}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this;if(this.props.userForm&&this.props.userForm.user&&this.props.userForm.user.submitFailed&&this.props.userForm.user.syncErrors){var t=this.getPlainFields(this.props.userForm.user.syncErrors);return p.a.createElement(ot.a,{bsStyle:"danger",className:"validation-error"},p.a.createElement("h4",null,this.props.errorMessage||"Validation Error"),p.a.createElement("ul",{className:"validation-error-fields-list"},t.map(function(t,r){return e.renderLabel(t.property,t.label,r)})))}return p.a.createElement("div",null)}}]),t}(d.Component));ar.propTypes={userForm:X.a.object.required,customFields:X.a.array.required,errorMessage:X.a.string};var ir,sr,cr,lr,ur,dr,pr=ar,gr=St()((sr=ir=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onSubmit",function(e){var t=r.props.languageDictionary.get("record").toJS();r.props.createUser(e,t)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.userCreate!==this.props.userCreate||e.languageDictionary!==this.props.languageDictionary||e.connections!==this.props.connections||e.accessLevel!==this.props.accessLevel||e.userFields!==this.props.userFields}},{key:"render",value:function(){var e=this.props.userCreate.toJS(),t=e.error,r=e.loading,n=e.record,o=this.props.connections.toJS(),a=this.props.accessLevel.get("record").toJS(),i=this.props.languageDictionary.get("record").toJS();return p.a.createElement(ot.f,{show:null!==n,className:"modal-overflow-visible",onHide:this.props.cancelCreateUser},p.a.createElement(ot.f.Header,{closeButton:!r,className:"has-border",closeLabel:i.closeButtonText},p.a.createElement(ot.f.Title,null,i.createDialogTitle||"Create User")),p.a.createElement(Kt,{customFields:this.props.userFields||[],customFieldGetter:function(e){return e.create},connections:o.records,initialValues:n,createMemberships:a.createMemberships,memberships:a.memberships,getDictValue:this.props.getDictValue,onClose:this.props.cancelCreateUser,onSubmit:this.onSubmit,loading:r,languageDictionary:i},p.a.createElement(Xe.Error,{title:i.errorTitle,message:ft(i,t,this.props.errorTranslator)}),p.a.createElement(pr,{userForm:this.props.userForm,customFields:this.props.userFields||[],errorMessage:i.validationError})))}}]),t}(d.Component),Y()(ir,"stateToProps",function(e){return{userCreate:e.userCreate,accessLevel:e.accessLevel,connections:e.connections,languageDictionary:e.languageDictionary,userForm:e.form}}),Y()(ir,"actionsToProps",I()({},s,c)),Y()(ir,"propTypes",{accessLevel:X.a.object.isRequired,connections:X.a.object.isRequired,userCreate:X.a.object.isRequired,userForm:X.a.object.isRequired,createUser:X.a.func.isRequired,getDictValue:X.a.func.isRequired,cancelCreateUser:X.a.func.isRequired,userFields:X.a.array.isRequired,errorTranslator:X.a.func,languageDictionary:X.a.object}),sr)),mr=St()((lr=cr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.deleteUser()}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.userDelete!==this.props.userDelete||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelDeleteUser,r=e.settings,n=this.props.userDelete.toJS(),o=n.user,a=n.error,i=n.requesting,s=n.loading,c=r.userFields||[],l=this.props.languageDictionary.get("record").toJS(),u=l.deleteDialogMessage||"Do you really want to delete {username}? This will completely remove the user and cannot be undone.",d=Dt(u,"username",lt(o,c,l));return p.a.createElement(Xe.Confirm,{title:l.deleteDialogTitle||"Delete User?",show:i,loading:s,confirmMessage:l.dialogConfirmText,cancelMessage:l.dialogCancelText,onCancel:t,onConfirm:this.onConfirm,closeLabel:l.closeButtonText},p.a.createElement(Xe.Error,{title:l.errorTitle,message:ft(l,a,r.errorTranslator)}),p.a.createElement("p",null,d))}}]),t}(d.Component),Y()(cr,"stateToProps",function(e){return{userDelete:e.userDelete,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(cr,"actionsToProps",I()({},s)),Y()(cr,"propTypes",{cancelDeleteUser:X.a.func.isRequired,deleteUser:X.a.func.isRequired,userDelete:X.a.object.isRequired,languageDictionary:X.a.object}),lr)),fr=St()((dr=ur=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onSubmit",function(e){var t=_([]).concat(_.map(_.filter(r.props.userFields,function(e){return e.property&&e.edit&&!1!==e.edit}),function(e){return e.property.split(".")[0]})).uniq().value();r.props.changeFields(r.props.userId,_.pick(e,t),r.props.languageDictionary.get("record").toJS())}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.fieldsChange!==this.props.fieldsChange||e.userFields!==this.props.userFields||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props.fieldsChange.toJS(),t=e.error,r=e.loading,n=e.record,o=this.props.languageDictionary.get("record").toJS();return p.a.createElement(ot.f,{show:null!==n,className:"modal-overflow-visible",onHide:this.props.cancelChangeFields},p.a.createElement(ot.f.Header,{closeButton:!r,className:"has-border",closeLabel:o.closeButtonText},p.a.createElement(ot.f.Title,null,o.changeProfileDialogTitle||"Change Profile")),p.a.createElement(Ut,{customFields:this.props.userFields||[],customFieldGetter:function(e){return e.edit},initialValues:n,onClose:this.props.cancelChangeFields,onSubmit:this.onSubmit,loading:r,languageDictionary:o},p.a.createElement(Xe.Error,{title:o.errorTitle,message:ft(o,t,this.props.errorTranslator)}),p.a.createElement(pr,{userForm:this.props.userForm,customFields:this.props.userFields||[],errorMessage:o.validationError})))}}]),t}(d.Component),Y()(ur,"stateToProps",function(e){return{fieldsChange:e.fieldsChange,userId:e.fieldsChange.toJS().userId,languageDictionary:e.languageDictionary,userForm:e.form}}),Y()(ur,"actionsToProps",I()({},s,c)),Y()(ur,"propTypes",{fieldsChange:d.PropTypes.object.isRequired,changeFields:d.PropTypes.func.isRequired,cancelChangeFields:d.PropTypes.func.isRequired,userFields:d.PropTypes.array.isRequired,userForm:d.PropTypes.object.isRequired,userId:d.PropTypes.string.isRequired,languageDictionary:d.PropTypes.object,errorTranslator:d.PropTypes.func}),dr)),hr=function(e){return function(t){t(Object(Pt.e)(e))}},Er=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props,t=e.fields,r=e.isEditForm,n=this.props.languageDictionary||{};return p.a.createElement("div",{className:"row"},t.map(function(e,t){return p.a.createElement(Lt,{key:t,field:e,isEditField:r,languageDictionary:n})}))}}]),t}(d.Component);Y()(Er,"propTypes",{isEditForm:X.a.bool.isRequired,fields:X.a.array.isRequired,languageDictionary:X.a.object});var yr,br,vr,_r,Cr,Tr,Sr,Dr,Fr,Rr,Pr,Ar,wr,Or,Lr,jr,kr,Ur,Ir=function(e,t){return Object(Pt.d)({form:e,onSubmit:t})(Er)},Nr=St()((br=yr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.submitForm("change-email")}),Y()(K()(r),"onSubmit",function(e){var t=r.props.emailChange.toJS().user;r.props.changeEmail(t,e,r.props.languageDictionary.get("record").toJS())}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.languageDictionary!==this.props.languageDictionary||e.emailChange!==this.props.emailChange}},{key:"render",value:function(){var e=this.props,t=e.cancelEmailChange,r=e.settings,n=e.connections,o=this.props.emailChange.toJS(),a=o.user,i=o.connection,s=o.error,c=o.requesting,l=o.loading,u=r.userFields||[],d=this.props.languageDictionary.get("record").toJS(),g=d.changeEmailMessage||"Do you really want to change the email for {username}?",m=Dt(g,"username",lt(a,u,d)),f=it.a.cloneDeep(u)||[];Bt(!0,f),Mt(!0,f,i,n.get("records").toJS());var h=["email","connection"],E=it.a.filter(f,function(e){return it.a.includes(h,e.property)}),y=Ir("change-email",this.onSubmit.bind(this));return p.a.createElement(Xe.Confirm,{title:d.changeEmailTitle||"Change Email?",confirmMessage:d.dialogConfirmText,cancelMessage:d.dialogCancelText,show:c,loading:l,onCancel:t,onConfirm:this.onConfirm,closeLabel:d.closeButtonText},p.a.createElement(Xe.Error,{title:d.errorTitle,message:ft(d,s,r.errorTranslator)}),p.a.createElement("p",null,m),p.a.createElement(y,{initialValues:pt(a,h,E,"edit",d),isEditForm:!0,fields:E,languageDictionary:d}))}}]),t}(d.Component),Y()(yr,"stateToProps",function(e){return{connections:e.connections,emailChange:e.emailChange,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(yr,"actionsToProps",I()({submitForm:hr},s)),Y()(yr,"propTypes",{cancelEmailChange:X.a.func.isRequired,changeEmail:X.a.func.isRequired,connections:X.a.object.isRequired,emailChange:X.a.object.isRequired}),br)),qr=St()((_r=vr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.submitForm("change-password")}),Y()(K()(r),"onSubmit",function(e){var t=r.props.languageDictionary.get("record").toJS();r.props.changePassword(e,t)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.passwordChange!==this.props.passwordChange||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelPasswordChange,r=e.settings,n=e.connections,o=this.props.passwordChange.toJS(),a=o.connection,i=o.user,s=o.error,c=o.requesting,l=o.loading,u=r.userFields||[];if(!c)return null;var d=this.props.languageDictionary.get("record").toJS(),g=d.changePasswordMessage||"Do you really want to reset the password for {username}? You'll need a safe way to communicate the new password to your user, never send the user this new password in clear text.",m=Dt(g,"username",lt(i,u,d)),f=it.a.cloneDeep(u)||[];xt(!0,f),Mt(!0,f,a,n.get("records").toJS()),Jt(!0,f);var h=["email","connection","password","repeatPassword"],E=it.a.filter(f,function(e){return it.a.includes(h,e.property)}),y=Ir("change-password",this.onSubmit);return p.a.createElement(Xe.Confirm,{title:d.changePasswordTitle||"Change Password?",show:c,loading:l,confirmMessage:d.dialogConfirmText,cancelMessage:d.dialogCancelText,onCancel:t,closeLabel:d.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:d.errorTitle,message:ft(d,s,r.errorTranslator)}),p.a.createElement("p",null,m),p.a.createElement(y,{initialValues:pt(i,h,E,"edit",d),isEditForm:!0,fields:E,languageDictionary:d}))}}]),t}(d.Component),Y()(vr,"stateToProps",function(e){return{connections:e.connections,passwordChange:e.passwordChange,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(vr,"actionsToProps",I()({submitForm:hr},s)),Y()(vr,"propTypes",{connections:d.PropTypes.object.isRequired,passwordChange:d.PropTypes.object.isRequired,changePassword:d.PropTypes.func.isRequired,cancelPasswordChange:d.PropTypes.func.isRequired}),_r)),Mr=r(190),xr=Object(Mr.createSelector)([function(e){return e.applications.get("records")},function(e){return e.user.get("connection")&&e.user.get("connection").get("enabled_clients")}],function(e,t){return e.filter(function(e){return t&&t.indexOf(e.get("client_id"))>=0})}),Br=St()((Tr=Cr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.submitForm("reset-password")}),Y()(K()(r),"onSubmit",function(e){r.props.resetPassword(e)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.passwordReset!==this.props.passwordReset||e.languageDictionary!==this.props.languageDictionary||e.appsForConnection!==this.props.appsForConnection}},{key:"render",value:function(){var e=this.props,t=e.cancelPasswordReset,r=e.settings,n=e.connections,o=this.props.passwordReset.toJS(),a=o.connection,i=o.user,s=o.error,c=o.requesting,l=o.loading;if(!c)return null;var u=r.userFields||[],d=this.props.languageDictionary.get("record").toJS(),g=d.resetPasswordMessage||"Do you really want to reset the password for {username}? This will send an email to the user allowing them to choose a new password.",m=Dt(g,"username",lt(i,u,d)),f=it.a.cloneDeep(u)||[];!function(e,t,r){var n=e?"edit":"create",o=Y()({property:"client",label:"Client"},n,{type:"select",component:"InputCombo",required:!1,options:r.map(function(e){return{value:e.client_id,label:e.name}})});Nt(n,t,"client",o)}(!0,f,this.props.appsForConnection.toJS()),Mt(!0,f,a,n.get("records").toJS()),Jt(!0,f);var h=["email","client","connection"],E=it.a.filter(f,function(e){return it.a.includes(h,e.property)}),y=Ir("reset-password",this.onSubmit);return p.a.createElement(Xe.Confirm,{title:d.resetPasswordTitle||"Reset Password?",show:c,loading:l,confirmMessage:d.dialogConfirmText,cancelMessage:d.dialogCancelText,onCancel:t,closeLabel:d.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:d.errorTitle,message:ft(d,s,r.errorTranslator)}),p.a.createElement("p",null,m),p.a.createElement(y,{initialValues:pt(i,h,E,"edit",d,{applications:this.props.appsForConnection.toJS()}),isEditForm:!0,fields:E,languageDictionary:d}))}}]),t}(d.Component),Y()(Cr,"stateToProps",function(e){return{connections:e.connections,passwordReset:e.passwordReset,appsForConnection:xr(e),settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(Cr,"actionsToProps",I()({submitForm:hr},s)),Y()(Cr,"propTypes",{cancelPasswordReset:X.a.func.isRequired,resetPassword:X.a.func.isRequired,connections:X.a.object.isRequired,passwordReset:X.a.object.isRequired,appsForConnection:X.a.object}),Tr)),Jr=St()((Dr=Sr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.submitForm("remove-mfa")}),Y()(K()(r),"onSubmit",function(e){r.props.removeMultiFactor(e.user_id,e.multifactor)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.mfa!==this.props.mfa||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelRemoveMultiFactor,r=e.settings,n=this.props.mfa.toJS(),o=n.user,a=n.error,i=n.requesting,s=n.loading,c=r.userFields||[],l=this.props.languageDictionary.get("record").toJS(),u=l.removeMultiFactorMessage||"Do you really want to remove the multi factor authentication settings for {username}? This will allow the user to authenticate and reconfigure a new device.",d=Dt(u,"username",lt(o,c,l)),g=it.a.cloneDeep(c)||[];!function(e,t,r,n){var o=e?"edit":"create",a=Y()({property:"multifactor",label:"MFA Provider"},o,{required:!0,type:"select",component:"InputCombo",options:r.map(function(e){return{value:e,label:e}}),onChange:n});Nt(o,t,"multifactor",a)}(!0,g,o&&o.multifactor?o.multifactor:[]);var m=["user_id","multifactor"],f=it.a.filter(g,function(e){return it.a.includes(m,e.property)}),h=Ir("remove-mfa",this.onSubmit.bind(this)),E=pt(o,m,f,"edit",l);if(E.multifactor)E.multifactor=JSON.parse(E.multifactor)[0];return p.a.createElement(Xe.Confirm,{title:l.removeMultiFactorTitle||"Remove Multi Factor Authentication?",show:i,loading:s,confirmMessage:l.dialogConfirmText,cancelMessage:l.dialogCancelText,onCancel:t,closeLabel:l.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:l.errorTitle,message:ft(l,a,r.errorTranslator)}),p.a.createElement("p",null,d),p.a.createElement(h,{initialValues:E,isEditForm:!0,fields:f,languageDictionary:l}))}}]),t}(d.Component),Y()(Sr,"stateToProps",function(e){return{mfa:e.mfa,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(Sr,"actionsToProps",I()({submitForm:hr},s)),Y()(Sr,"propTypes",{cancelRemoveMultiFactor:X.a.func.isRequired,removeMultiFactor:X.a.func.isRequired,mfa:X.a.object.isRequired}),Dr)),Hr=St()((Rr=Fr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.resendVerificationEmail(r.props.verificationEmail.toJS().user.user_id)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.verificationEmail!==this.props.verificationEmail||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelResendVerificationEmail,r=e.settings,n=this.props.verificationEmail.toJS(),o=n.user,a=n.error,i=n.requesting,s=n.loading,c=r.userFields||[],l=this.props.languageDictionary.get("record").toJS(),u=l.resendVerificationEmailMessage||"Do you really want to resend verification email to {username}?",d=Dt(u,"username",lt(o,c,l));return p.a.createElement(Xe.Confirm,{title:l.resendVerificationEmailTitle||"Resend Verification Email?",show:i,loading:s,confirmMessage:l.dialogConfirmText,cancelMessage:l.dialogCancelText,onCancel:t,closeLabel:l.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:l.errorTitle,message:ft(l,a,r.errorTranslator)}),p.a.createElement("p",null,d))}}]),t}(d.Component),Y()(Fr,"stateToProps",function(e){return{verificationEmail:e.verificationEmail,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(Fr,"actionsToProps",I()({},s)),Y()(Fr,"propTypes",{cancelResendVerificationEmail:X.a.func.isRequired,resendVerificationEmail:X.a.func.isRequired,verificationEmail:X.a.object.isRequired}),Rr)),Vr=St()((Ar=Pr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.unblockUser()}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.unblock!==this.props.unblock||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelUnblockUser,r=e.settings,n=this.props.unblock.toJS(),o=n.user,a=n.error,i=n.requesting,s=n.loading,c=r.userFields||[],l=this.props.languageDictionary.get("record").toJS(),u=l.unblockDialogMessage||"Do you really want to unblock {username}? After doing so the user will be able to sign in again.",d=Dt(u,"username",lt(o,c,l));return p.a.createElement(Xe.Confirm,{title:l.unblockDialogTitle||"Unblock User?",show:i,loading:s,confirmMessage:l.dialogConfirmText,cancelMessage:l.dialogCancelText,onCancel:t,closeLabel:l.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:l.errorTitle,message:ft(l,a,r.errorTranslator)}),p.a.createElement("p",null,d))}}]),t}(d.Component),Y()(Pr,"stateToProps",function(e){return{unblock:e.unblock,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(Pr,"actionsToProps",I()({},s)),Y()(Pr,"propTypes",{cancelUnblockUser:X.a.func.isRequired,unblockUser:X.a.func.isRequired,unblock:X.a.object.isRequired}),Ar)),Gr=St()((Or=wr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.removeUserBlocks()}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.removeBlockedIPs!==this.props.removeBlockedIPs||e.languageDictionary!==this.props.languageDictionary}},{key:"render",value:function(){var e=this.props,t=e.cancelRemoveBlocks,r=e.settings,n=this.props.removeBlockedIPs.toJS(),o=n.user,a=n.error,i=n.requesting,s=n.loading,c=r.userFields||[],l=this.props.languageDictionary.get("record").toJS(),u=l.removeBlockedIPsDialogMessage||"Do you really want to remove all Anomaly Detection blocks from {username}? After doing so the user will be able to sign in again.",d=Dt(u,"username",lt(o,c,l));return p.a.createElement(Xe.Confirm,{title:l.removeBlockedIPsDialogTitle||"Remove all blocked IPs?",show:i,loading:s,confirmMessage:l.dialogConfirmText,cancelMessage:l.dialogCancelText,onCancel:t,closeLabel:l.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:l.errorTitle,message:ft(l,a,r.errorTranslator)}),p.a.createElement("p",null,d))}}]),t}(d.Component),Y()(wr,"stateToProps",function(e){return{removeBlockedIPs:e.removeBlockedIPs,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary}}),Y()(wr,"actionsToProps",I()({},s)),Y()(wr,"propTypes",{cancelRemoveBlocks:X.a.func.isRequired,removeUserBlocks:X.a.func.isRequired,removeBlockedIPs:X.a.object.isRequired}),Or)),Kr=St()((jr=Lr=function(e){function t(){var e,r;q()(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J()(this,(e=V()(t)).call.apply(e,[this].concat(o))),Y()(K()(r),"onConfirm",function(){r.props.submitForm("change-username")}),Y()(K()(r),"onSubmit",function(e){var t=r.props.languageDictionary.get("record").toJS();r.props.changeUsername(r.props.usernameChange.toJS().user.user_id,e,t)}),r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return e.languageDictionary!==this.props.languageDictionary||e.usernameChange!==this.props.usernameChange}},{key:"render",value:function(){var e=this.props,t=e.cancelUsernameChange,r=e.connections,n=e.settings,o=this.props.usernameChange.toJS(),a=o.user,i=o.connection,s=o.error,c=o.requesting,l=o.loading;if(!c)return null;var u=n.userFields||[],d=this.props.languageDictionary.get("record").toJS(),g=d.changeUsernameMessage||"Do you really want to change the username for {username}?",m=Dt(g,"username",lt(a,u,d)),f=["username","connection"],h=pt(a,f,u,"edit",d),E=it.a.cloneDeep(u)||[];qt(!0,E,r.get("records").toJS(),i,h),Mt(!0,E,i,r.get("records").toJS());var y=it.a.filter(E,function(e){return it.a.includes(f,e.property)}),b=Ir("change-username",this.onSubmit);return p.a.createElement(Xe.Confirm,{title:d.changeUsernameTitle||"Change Username?",show:c,loading:l,confirmMessage:d.dialogConfirmText,cancelMessage:d.dialogCancelText,onCancel:t,closeLabel:d.closeButtonText,onConfirm:this.onConfirm},p.a.createElement(Xe.Error,{title:d.errorTitle,message:ft(d,s,n.errorTranslator)}),p.a.createElement("p",null,m),p.a.createElement(b,{initialValues:h,isEditForm:!0,fields:y,languageDictionary:d}))}}]),t}(d.Component),Y()(Lr,"stateToProps",function(e){return{usernameChange:e.usernameChange,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},connections:e.connections,languageDictionary:e.languageDictionary}}),Y()(Lr,"actionsToProps",I()({submitForm:hr},s)),Y()(Lr,"propTypes",{cancelUsernameChange:d.PropTypes.func.isRequired,changeUsername:d.PropTypes.func.isRequired,connections:d.PropTypes.object.isRequired,usernameChange:d.PropTypes.object.isRequired}),jr)),Wr=Object(Mr.createSelector)([function(e){return e.user.get("record")&&e.user.get("record").get("identities")}],function(e){return e&&e.filter(function(e){return"auth0"===e.get("provider")}).map(function(e){return e.get("connection")})}),zr=St()((Ur=kr=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"componentWillMount",value:function(){this.props.fetchUser(this.props.params.id)}},{key:"renderProfile",value:function(e,t,r,n){if(e)return null;else return p.a.createElement(ot.g,{eventKey:4,title:r.userProfileTabTitle||"Profile"},p.a.createElement(Qt,{loading:t.get("loading"),user:t.get("record"),error:t.get("error"),languageDictionary:r,settings:n}))}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.databaseConnections,n=e.log,o=e.logs,a=e.devices,i=e.settings,s=e.languageDictionary,c=(i&&i.userFields||[]).filter(function(e){return"picture"!==e.property&&"client"!==e.property}),l=i&&!0===i.suppressRawData,u=this.props.accessLevel.role,d=i.dict&&i.dict.title||window.config.TITLE||"User Management";return document.title="".concat(s.userTitle||"User Details"," - ").concat(d),p.a.createElement("div",{className:"user"},p.a.createElement(yt,{role:u,languageDictionary:s}),p.a.createElement("div",{className:"row content-header"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement("h1",{className:"pull-left"},s.userTitle||"User Details"),p.a.createElement("div",{className:"pull-right"},p.a.createElement(Rt,{role:u,user:t,userFields:c,databaseConnections:r,deleteUser:this.props.requestDeleteUser,changeFields:this.props.requestFieldsChange,resetPassword:this.props.requestPasswordReset,changePassword:this.props.requestPasswordChange,removeMfa:this.props.requestRemoveMultiFactor,blockUser:this.props.requestBlockUser,unblockUser:this.props.requestUnblockUser,removeBlockedIPs:this.props.requestRemoveBlockedIPs,changeUsername:this.props.requestUsernameChange,changeEmail:this.props.requestEmailChange,resendVerificationEmail:this.props.requestResendVerificationEmail,languageDictionary:s})))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement(Wt,{loading:t.get("loading"),user:t.get("record"),error:t.get("error"),userFields:c,languageDictionary:s}))),p.a.createElement("div",{className:"row user-tabs"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement(ot.h,{defaultActiveKey:1,animation:!1,id:"user-info-tabs"},p.a.createElement(ot.g,{eventKey:1,title:s.userUserInfoTabTitle||"User Information"},p.a.createElement(Zt,{loading:t.get("loading"),user:t.get("record"),memberships:t.get("memberships")&&t.get("memberships").toJSON(),userFields:c,error:t.get("error"),settings:i,languageDictionary:s})),p.a.createElement(ot.g,{eventKey:2,title:s.userDevicesTabTitle||"Devices"},p.a.createElement(It,{loading:a.get("loading"),devices:a.get("records"),languageDictionary:s,settings:i,error:a.get("error")})),p.a.createElement(ot.g,{eventKey:3,title:s.userLogsTabTitle||"Logs"},p.a.createElement(ht,{onClose:this.props.clearLog,error:n.get("error"),loading:n.get("loading"),log:n.get("record"),languageDictionary:s,settings:i,logId:n.get("logId")}),p.a.createElement(Et,{onOpen:this.props.fetchLog,loading:o.get("loading"),logs:o.get("records"),languageDictionary:s,error:o.get("error"),settings:i,isUserLogs:!0})),this.renderProfile(l,t,s,i)))),p.a.createElement(mr,null),p.a.createElement(fr,{getDictValue:this.props.getDictValue,userFields:c,errorTranslator:i.errorTranslator}),p.a.createElement(Nr,null),p.a.createElement(Br,null),p.a.createElement(qr,null),p.a.createElement(Kr,null),p.a.createElement(Hr,null),p.a.createElement(Ft,null),p.a.createElement(Vr,null),p.a.createElement(Gr,null),p.a.createElement(Jr,null))}}]),t}(d.Component),Y()(kr,"stateToProps",function(e){return{user:e.user,databaseConnections:Wr(e),log:e.log,logs:e.user.get("logs"),devices:e.user.get("devices"),settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary.get("record").toJS()||{}}}),Y()(kr,"actionsToProps",I()({},i,s)),Y()(kr,"propTypes",{languageDictionary:d.PropTypes.object.isRequired,accessLevel:d.PropTypes.object.isRequired,settings:d.PropTypes.object.isRequired,user:d.PropTypes.object,log:d.PropTypes.object,logs:d.PropTypes.object,devices:d.PropTypes.object,params:d.PropTypes.object,clearLog:p.a.PropTypes.func.isRequired,fetchLog:p.a.PropTypes.func.isRequired,fetchUser:p.a.PropTypes.func.isRequired,getDictValue:p.a.PropTypes.func.isRequired}),Ur)),Qr=(r(956),function(e){function t(e){var r;return q()(this,t),r=J()(this,V()(t).call(this,e)),Y()(K()(r),"componentWillMount",function(){r.props.fetchUsers(),r.props.fetchConnections()}),Y()(K()(r),"onPageChange",function(e){r.props.fetchUsers("",!1,e-1)}),Y()(K()(r),"onSearch",function(e,t,n){if(e&&e.length>0)r.props.fetchUsers(e,!1,0,t,null,n)}),Y()(K()(r),"onReset",function(){r.props.fetchUsers("",!0)}),Y()(K()(r),"createUser",function(){r.props.requestCreateUser(r.props.accessLevel.get("record").get("memberships")&&r.props.accessLevel.get("record").get("memberships").toJS())}),Y()(K()(r),"onColumnSort",function(e){r.props.fetchUsers("",!1,0,null,e)}),r.state={showCreateForm:!1},r}return z()(t,e),x()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,r=e.error,n=e.users,o=e.total,a=e.connections,i=e.accessLevel,s=e.nextPage,c=e.pages,l=e.settings,u=e.sortProperty,d=e.sortOrder,g=e.searchValue,m=e.languageDictionary,f=l&&l.userFields||[],h=void 0!==l.canCreateUser?l.canCreateUser:!0,E=i.get("record").get("role"),y=l.dict&&l.dict.title||window.config.TITLE||"User Management";return document.title="".concat(m.userUsersTabTitle||"Users"," - ").concat(y),p.a.createElement("div",{className:"users"},p.a.createElement(yt,{languageDictionary:m,role:E}),p.a.createElement("div",{className:"row content-header"},p.a.createElement("div",{className:"col-xs-12 user-table-content"},p.a.createElement("h1",null,m.usersTitle||"Users"),a.length&&E>0&&h?p.a.createElement("button",{id:"create-user-button",className:"btn btn-success pull-right new",onClick:this.createUser},p.a.createElement("i",{className:"icon-budicon-473"}),m.createUserButtonText||"Create User"):"")),p.a.createElement(gr,{getDictValue:this.props.getDictValue,userFields:f,errorTranslator:l&&l.errorTranslator}),p.a.createElement(zt,{onReset:this.onReset,onSearch:this.onSearch,onPageChange:this.onPageChange,error:r,users:n,total:o,nextPage:s,pages:c,loading:t,role:i.role,userFields:f,sortProperty:u,sortOrder:d,searchValue:g,onColumnSort:this.onColumnSort,settings:l,languageDictionary:m}),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xs-12"},c>1?p.a.createElement(Xe.Pagination,{totalItems:o,handlePageChange:this.onPageChange,perPage:10,textFormat:m.paginationTextFormat}):p.a.createElement(Xe.TableTotals,{currentCount:n.length,totalCount:o,textFormat:m.tableTotalsTextFormat}))))}}]),t}(d.Component));Y()(Qr,"propTypes",{loading:X.a.bool.isRequired,error:X.a.string,users:X.a.array,connections:X.a.array,userCreateError:X.a.string,userCreateLoading:X.a.bool,validationErrors:X.a.object,accessLevel:X.a.object,total:X.a.number,fetchUsers:X.a.func.isRequired,getDictValue:X.a.func.isRequired,createUser:X.a.func.isRequired,fetchConnections:X.a.func.isRequired,requestCreateUser:X.a.func.isRequired,settings:X.a.object.isRequired,sortOrder:X.a.number.isRequired,sortProperty:X.a.string.isRequired,searchValue:X.a.string,languageDictionary:X.a.object.isRequired});var Yr=Object(f.connect)(function(e){return{accessLevel:e.accessLevel,error:e.users.get("error"),userCreateError:e.userCreate.get("error"),userCreateLoading:e.userCreate.get("loading"),validationErrors:e.userCreate.get("validationErrors"),loading:e.users.get("loading"),users:e.users.get("records").toJS(),connections:e.connections.get("records").toJS(),total:e.users.get("total"),nextPage:e.users.get("nextPage"),pages:e.users.get("pages"),sortProperty:e.users.get("sortProperty"),sortOrder:e.users.get("sortOrder"),searchValue:e.users.get("searchValue"),settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary.get("record").toJS()}},I()({},a,s))(Qr),Zr=r(510),Xr=r.n(Zr),$r=(r(132),r(958),r(959),r(960),r(961),r(962),r(963),r(964),function(e){function t(e){var r;return q()(this,t),r=J()(this,V()(t).call(this,e)),Y()(K()(r),"onChange",function(e){if(r.setState({value:e}),r.props.onChange)r.props.onChange(e)}),r.state={value:e.value||""},r}return z()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.refs.editor.getCodeMirror().refresh()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.value!==e.value){this.setState({value:e.value});var t=this.refs.editor;if(t)t.getCodeMirror().setValue(e.value)}}},{key:"componentDidUpdate",value:function(){this.refs.editor.getCodeMirror().refresh()}},{key:"render",value:function(){var e=this.props.options;return p.a.createElement(Xr.a,{ref:"editor",value:this.state.value||"",onChange:this.onChange,options:e})}}]),t}(d.Component));Y()($r,"propTypes",{value:d.PropTypes.string.isRequired,options:d.PropTypes.object.isRequired,onChange:d.PropTypes.func}),Y()($r,"defaultProps",{value:"",options:{mode:"javascript",lineWrapping:!0,continueComments:"Enter",matchBrackets:!0,styleActiveLine:!0,closeBrackets:!0,indentUnit:2,smartIndent:!0,autofocus:!0,tabSize:2,lint:{options:{sub:!0,noarg:!0,undef:!0,eqeqeq:!0,laxcomma:!0,"-W025":!0,predef:["module","require"]}}}});r(965);var en,tn,rn,nn,on,an,sn,cn,ln,un,dn,pn,gn,mn,fn,hn,En,yn,bn,vn,_n,Cn,Tn,Sn,Dn,Fn,Rn=St()((tn=en=function(e){function t(e){var r;return q()(this,t),r=J()(this,V()(t).call(this,e)),Y()(K()(r),"componentWillMount",function(){r.props.fetchScript("access"),r.props.fetchScript("filter"),r.props.fetchScript("create"),r.props.fetchScript("memberships"),r.props.fetchScript("settings")}),Y()(K()(r),"saveScript",function(e){return function(){r.props.updateScript(e,r.state.code[e])}}),Y()(K()(r),"onEditorChanged",function(e){return function(t){var n=r.state.code;n[e]=t,r.setState({code:n})}}),r.state={activeTab:1,code:{}},r}return z()(t,e),x()(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.scripts!==e.scripts}},{key:"componentWillReceiveProps",value:function(e){if(e.scripts){var t=this.state.code,r=e.scripts.toJS();Object.keys(r).forEach(function(e){if(!t[e])t[e]=r[e].script}),this.setState({code:t})}}},{key:"render",value:function(){var e=this.state.code,t=this.props.scripts.toJS(),r=this.props,n=r.languageDictionary,o=r.settings,a=o.dict&&o.dict.title||window.config.TITLE||"User Management";return document.title="".concat(n.configurationMenuItemText||"Configuration"," - ").concat(a),p.a.createElement("div",{className:"configuration"},p.a.createElement("div",{className:"row content-header"},p.a.createElement("div",{className:"col-xs-12 user-table-content"},p.a.createElement("h2",null,"Configuration"),p.a.createElement("p",null,"This configuration page allows you to fine tune the behavior of the Delegated Administration dashboard. More information and examples of hooks are available ",p.a.createElement("a",{href:"https://auth0.com/docs/extensions/delegated-admin"},"on the documentation page"),"."))),p.a.createElement("div",{className:"row configuration-tabs"},p.a.createElement("div",{className:"col-xs-12"},p.a.createElement(ot.h,{defaultActiveKey:this.state.activeTab,animation:!1,id:"configuration-tabs"},p.a.createElement(ot.g,{eventKey:1,title:e.filter&&e.filter.length?p.a.createElement("span",null,"Filter Hook"):p.a.createElement("i",null,"Filter Hook")},p.a.createElement(Xe.LoadingPanel,{show:t.filter&&t.filter.loading,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:n.errorTitle,message:ft(n,t.filter&&t.filter.error)}),p.a.createElement("p",null,"The ",p.a.createElement("strong",null,"filter hook")," allows you to specify which records are shown to the current users when loading the list of users or searching. For example: ",p.a.createElement("i",null,"Only show users from my department"),". This has to be defined using the lucene syntax."),p.a.createElement($r,{value:e.filter||"",onChange:this.onEditorChanged("filter")}),p.a.createElement("div",{className:"save-config"},p.a.createElement("button",{onClick:this.saveScript("filter"),className:"btn btn-success"},"Save Filter Hook")))),p.a.createElement(ot.g,{eventKey:2,title:e.access&&e.access.length?p.a.createElement("span",null,"Access Hook"):p.a.createElement("i",null,"Access Hook")},p.a.createElement(Xe.LoadingPanel,{show:t.access&&t.access.loading,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:n.errorTitle,message:ft(n,t.access&&t.access.error)}),p.a.createElement("p",null,"The ",p.a.createElement("strong",null,"access hook")," will allow you to specify if the current user is allowed to access a specific user (eg: view the details, delete the user, ...)."),p.a.createElement($r,{value:e.access||"",onChange:this.onEditorChanged("access")}),p.a.createElement("div",{className:"save-config"},p.a.createElement("button",{onClick:this.saveScript("access"),className:"btn btn-success"},"Save Access Hook")))),p.a.createElement(ot.g,{eventKey:3,title:e.create&&e.create.length?p.a.createElement("span",null,"Write Hook"):p.a.createElement("i",null,"Write Hook")},p.a.createElement(Xe.LoadingPanel,{show:t.create&&t.create.loading,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:n.errorTitle,message:ft(n,t.create&&t.create.error)}),p.a.createElement("p",null,"The ",p.a.createElement("strong",null,"write hook")," will run every time a new user is created. This hook will allow you to shape the user object before it's sent to Auth0. The context object contains the request (with the current user) and the payload sent by the end user."),p.a.createElement($r,{value:e.create||"",onChange:this.onEditorChanged("create")}),p.a.createElement("div",{className:"save-config"},p.a.createElement("button",{onClick:this.saveScript("create"),className:"btn btn-success"},"Save Write Hook")))),p.a.createElement(ot.g,{eventKey:4,title:e.memberships&&e.memberships.length?p.a.createElement("span",null,"Memberships Hook"):p.a.createElement("i",null,"Memberships Hook")},p.a.createElement(Xe.LoadingPanel,{show:t.memberships&&t.memberships.loading,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:n.errorTitle,message:ft(n,t.memberships&&t.memberships.error)}),p.a.createElement("p",null,"With the ",p.a.createElement("strong",null,"membership query")," you can specify in which groups the current user can create new users. Only in their own department? Or other departments also?"),p.a.createElement($r,{value:e.memberships||"",onChange:this.onEditorChanged("memberships")}),p.a.createElement("div",{className:"save-config"},p.a.createElement("button",{onClick:this.saveScript("memberships"),className:"btn btn-success"},"Save Memberships Query")))),p.a.createElement(ot.g,{eventKey:5,title:e.settings&&e.settings.length?p.a.createElement("span",null,"Settings Query"):p.a.createElement("i",null,"Settings Query")},p.a.createElement(Xe.LoadingPanel,{show:t.settings&&t.settings.loading,animationStyle:{paddingTop:"5px",paddingBottom:"5px"}},p.a.createElement(Xe.Error,{title:n.errorTitle,message:ft(n,t.settings&&t.settings.error)}),p.a.createElement("p",null,"With the ",p.a.createElement("strong",null,"settings query")," you can control the title and the look-and-feel of the dashboard after the user has logged in?"),p.a.createElement($r,{value:e.settings||"",onChange:this.onEditorChanged("settings")}),p.a.createElement("div",{className:"save-config"},p.a.createElement("button",{onClick:this.saveScript("settings"),className:"btn btn-success"},"Save Settings Query"))))))))}}]),t}(d.Component),Y()(en,"stateToProps",function(e){return{scripts:e.scripts,settings:e.settings.get("record")&&e.settings.get("record").toJS().settings||{},languageDictionary:e.languageDictionary&&e.languageDictionary.get("record").toJS()}}),Y()(en,"actionsToProps",I()({},c)),Y()(en,"propTypes",{scripts:d.PropTypes.object.isRequired,settings:d.PropTypes.object.isRequired,fetchScript:d.PropTypes.func.isRequired,updateScript:d.PropTypes.func.isRequired,languageDictionary:d.PropTypes.object}),Y()(en,"defaultProps",{languageDictionary:{}}),tn)),Pn=r(511),An=r.n(Pn),wn=r(512),On=r.n(wn),Ln=r(515),jn=r(38),kn={loading:!1,error:null,record:{role:0,memberships:[],createMemberships:!1}},Un=Object(ie.a)(Object(ae.fromJS)(kn),(rn={},Y()(rn,C.F,function(e){return e.merge({loading:!0,error:null})}),Y()(rn,C.G,function(e,t){return e.merge({loading:!1,error:t.errorData,record:Object(ae.fromJS)(I()({},kn.record,{role:2}))})}),Y()(rn,C.E,function(e,t){return e.merge({loading:!1,error:null,record:Object(ae.fromJS)(t.payload.data)})}),rn)),In=Object(ie.a)(Object(ae.fromJS)({loading:!1,error:null,records:[]}),(nn={},Y()(nn,C.J,function(e){return e.merge({loading:!0,error:null})}),Y()(nn,C.K,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(nn,C.I,function(e,t){return e.merge({loading:!1,error:null,records:Object(ae.fromJS)(t.payload.data)})}),nn)),Nn=r(513),qn=r.n(Nn),Mn={error:null,isAuthenticated:!1,isAuthenticating:!1,issuer:null,token:null,decodedToken:null,user:null},xn=Object(ie.a)(Object(ae.fromJS)(Mn),(on={},Y()(on,C.Gb,function(e){return e.merge(I()({},Mn,{isAuthenticating:!0}))}),Y()(on,C.Fb,function(e,t){return e.merge({isAuthenticating:!1,error:t.payload&&t.payload.error||"Unknown Error"})}),Y()(on,C.Hb,function(e,t){return e.merge({isAuthenticated:!0,isAuthenticating:!1,user:t.payload.user,token:t.payload.token,decodedToken:t.payload.decodedToken,issuer:qn.a.parse(t.payload.decodedToken.iss).hostname,returnTo:t.payload.returnTo})}),Y()(on,C.Jb,function(e){return e.merge({user:null,token:null,decodedToken:null,isAuthenticated:!1})}),on)),Bn={error:null,loading:!1,requesting:!1,user:null},Jn=Object(ie.a)(Object(ae.fromJS)(Bn),(an={},Y()(an,C.ac,function(e,t){return e.merge({user:t.user,requesting:!0})}),Y()(an,C.e,function(e){return e.merge(I()({},Bn))}),Y()(an,C.c,function(e){return e.merge({loading:!0})}),Y()(an,C.d,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(an,C.b,function(e){return e.merge(I()({},Bn))}),an)),Hn=Object(ie.a)(Object(ae.fromJS)({loading:!1,error:null,records:[]}),(sn={},Y()(sn,C.N,function(e){return e.merge({loading:!0,error:null})}),Y()(sn,C.O,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(sn,C.M,function(e,t){return e.merge({loading:!1,error:null,records:Object(ae.fromJS)(t.payload.data)})}),sn)),Vn={error:null,loading:!1,requesting:!1,user:null,connection:null},Gn=Object(ie.a)(Object(ae.fromJS)(Vn),(cn={},Y()(cn,C.dc,function(e,t){return e.merge(I()({},Vn,{user:t.user,connection:t.connection,requesting:!0}))}),Y()(cn,C.h,function(e){return e.merge(I()({},Vn))}),Y()(cn,C.B,function(e,t){return e.merge({loading:!0,user:t.meta.user})}),Y()(cn,C.C,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(cn,C.A,function(e){return e.merge(I()({},Vn))}),cn)),Kn={loading:!1,error:null,record:{}},Wn=Object(ie.a)(Object(ae.fromJS)(Kn),(ln={},Y()(ln,C.R,function(e){return e.merge(I()({},Kn,{loading:!0,error:null}))}),Y()(ln,C.S,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(ln,C.Q,function(e,t){var r=t.payload.data;return e.merge({loading:!1,error:null,record:Object(ae.fromJS)(r)})}),ln)),zn={s:{event:"Success Login",icon:{name:"312",color:"green"}},ssa:{event:"Success Silent Auth",icon:{name:"312",color:"green"}},seacft:{event:"Success Exchange",description:"Authorization Code for Access Token",icon:{name:"456",color:"green"}},feacft:{event:"Failed Exchange",description:"Authorization Code for Access Token",icon:{name:"456",color:"#A93F3F"}},f:{event:"Failed Login",icon:{name:"311",color:"#A93F3F"}},fsa:{event:"Failed Silent Auth",icon:{name:"311",color:"#A93F3F"}},w:{event:"Warnings During Login",icon:{name:"354",color:"#FFA500"}},du:{event:"Deleted User",icon:{name:"311",color:"#A93F3F"}},fu:{event:"Failed Login (invalid email/username)",icon:{name:"311",color:"#A93F3F"}},fp:{event:"Failed Login (wrong password)",icon:{name:"311",color:"#A93F3F"}},fc:{event:"Failed by Connector",icon:{name:"313",color:"#A93F3F"}},fco:{event:"Failed by CORS",icon:{name:"313",color:"#A93F3F"}},con:{event:"Connector Online",icon:{name:"143",color:"green"}},coff:{event:"Connector Offline",icon:{name:"143",color:"#A93F3F"}},fcpro:{event:"Failed Connector Provisioning",icon:{name:"143",color:"#A93F3F"}},ss:{event:"Success Signup",icon:{name:"314",color:"green"}},fs:{event:"Failed Signup",icon:{name:"311",color:"#A93F3F"}},cs:{event:"Code Sent",icon:{name:"243",color:"green"}},cls:{event:"Code/Link Sent",icon:{name:"781",color:"green"}},sv:{event:"Success Verification Email",icon:{name:"781",color:"green"}},fv:{event:"Failed Verification Email",icon:{name:"311",color:"#A93F3F"}},scp:{event:"Success Change Password",icon:{name:"280",color:"green"}},fcp:{event:"Failed Change Password",icon:{name:"266",color:"#A93F3F"}},sce:{event:"Success Change Email",icon:{name:"266",color:"green"}},fce:{event:"Failed Change Email",icon:{name:"266",color:"#A93F3F"}},scu:{event:"Success Change Username",icon:{name:"266",color:"green"}},fcu:{event:"Failed Change Username",icon:{name:"266",color:"#A93F3F"}},scpn:{event:"Success Change Phone Number",icon:{name:"266",color:"green"}},fcpn:{event:"Failed Change Phone Number",icon:{name:"266",color:"#A93F3F"}},svr:{event:"Success Verification Email Request",icon:{name:"781",color:"green"}},fvr:{event:"Failed Verification Email Request",icon:{name:"311",color:"#A93F3F"}},scpr:{event:"Success Change Password Request",icon:{name:"280",color:"green"}},fcpr:{event:"Failed Change Password Request",icon:{name:"311",color:"#A93F3F"}},fn:{event:"Failed Sending Notification",icon:{name:"782",color:"#A93F3F"}},sapi:{event:"API Operation",icon:{name:"546",color:"green"},category:"api"},fapi:{event:"Failed API Operation",icon:{name:"546",color:"#A93F3F"},category:"api"},limit_wc:{event:"Blocked Account",icon:{name:"313",color:"#A93F3F"}},limit_ui:{event:"Too Many Calls to /userinfo",icon:{name:"313",color:"#A93F3F"}},api_limit:{event:"Rate Limit On API",icon:{name:"313",color:"#A93F3F"}},sdu:{event:"Successful User Deletion",icon:{name:"312",color:"green"}},fdu:{event:"Failed User Deletion",icon:{name:"311",color:"#A93F3F"}},seccft:{event:"Success Exchange (Client Credentials)",icon:{name:"546",color:"green"}},feccft:{event:"Failed Exchange (Client Credentials)",icon:{name:"311",color:"#A93F3F"}},limit_mu:{event:"Blocked IP Address",icon:{name:"311",color:"#A93F3F"}},slo:{event:"Success Logout",icon:{name:"546",color:"green"}},flo:{event:"Failed Logout",icon:{name:"311",color:"#A93F3F"}},sd:{event:"Success Delegation",icon:{name:"546",color:"green"}},fd:{event:"Failed Delegation",icon:{name:"311",color:"#A93F3F"}},gd_start_enroll:{event:"Enroll started",description:"Guardian - Start second factor enrollment",icon:{name:"299",color:"green"}},gd_enrollment_complete:{event:"Guardian enrollment complete",description:"Guardian - Enrollment complete",icon:{name:"299",color:"green"}},gd_auth_succeed:{event:"OTP Auth suceed",description:"Guardian - Second factor authentication succeed",icon:{name:"mfa-login-succeed",color:"green"}},gd_unenroll:{event:"Unenroll device account",description:"Guardian - Enrollment removed",icon:{name:"298",color:"green"}},sui:{event:"Users import",description:"Users import finished",icon:{name:"299",color:"green"}},fcoa:{event:"Failed cross-origin authentication",icon:{name:"311",color:"#A93F3F"}},fcph:{event:"Failed Post Change Password Hook",icon:{name:"311",color:"#A93F3F"}},feoobft:{event:"Failed Exchange",description:"Failed exchange of Password and OOB Challenge for Access Token",icon:{name:"311",color:"#A93F3F"}},feotpft:{event:"Failed Exchange",description:"Failed exchange of Password and OTP Challenge for Access Token",icon:{name:"311",color:"#A93F3F"}},fepft:{event:"Failed Exchange",description:"Failed exchange of Password for Access Token",icon:{name:"311",color:"#A93F3F"}},fercft:{event:"Failed Exchange",description:"Failed Exchange of Password and MFA Recovery code for Access Token",icon:{name:"311",color:"#A93F3F"}},fertft:{event:"Failed Exchange",description:"Failed Exchange of Refresh Token for Access Token",icon:{name:"311",color:"#A93F3F"}},ferrt:{event:"Failed Exchange",description:"Reused Refresh Token",icon:{name:"311",color:"#A93F3F"}},fui:{event:"Failed users import",description:"Failed to import users",icon:{name:"311",color:"#A93F3F"}},gd_auth_failed:{event:"OTP Auth failed",description:"One-time password authentication failed.",icon:{name:"311",color:"#A93F3F"}},gd_auth_rejected:{event:"OTP Auth rejected",description:"One-time password authentication rejected.",icon:{name:"311",color:"#A93F3F"}},gd_module_switch:{event:"Module switch",icon:{name:"354",color:"#FFA500"}},gd_otp_rate_limit_exceed:{event:"Too many failures",icon:{name:"311",color:"#A93F3F"}},gd_recovery_failed:{event:"Recovery failed",description:"Multi-factor recovery code failed.",icon:{name:"311",color:"#A93F3F"}},gd_recovery_rate_limit_exceed:{event:"Too many failures",description:"Multi-factor recovery code has failed too many times.",icon:{name:"311",color:"#A93F3F"}},gd_recovery_succeed:{event:"Recovery success",description:"Multi-factor recovery code succeeded authorization.",icon:{name:"312",color:"green"}},gd_send_pn:{event:"Push notification sent",description:"Push notification for MFA sent successfully sent.",icon:{name:"312",color:"green"}},gd_send_sms:{event:"SMS Sent",description:"SMS for MFA sent successfully sent.",icon:{name:"312",color:"green"}},gd_start_auth:{event:"Second factor started",description:"Second factor authentication event started for MFA.",icon:{name:"312",color:"green"}},gd_tenant_update:{event:"Guardian tenant update",icon:{name:"312",color:"green"}},gd_update_device_account:{event:"Update device account",description:"Device used for second factor authentication has been updated.",icon:{name:"312",color:"green"}},gd_user_delete:{event:"User delete",description:"Deleted multi-factor user account.",icon:{name:"312",color:"green"}},limit_delegation:{event:"Too Many Calls to /delegation",description:"Rate limit exceeded to /delegation endpoint",icon:{name:"311",color:"#A93F3F"}},pwd_leak:{event:"Breached password",description:"Someone attempted to login with a leaked password.",icon:{name:"311",color:"#A93F3F"}},scoa:{event:"Success cross-origin authentication",icon:{name:"312",color:"green"}},scph:{event:"Success Post Change Password Hook",icon:{name:"312",color:"green"}},seoobft:{event:"Success Exchange",description:"Successful exchange of Password and OOB Challenge for Access Token",icon:{name:"312",color:"green"}},seotpft:{event:"Success Exchange",description:"Successful exchange of Password and OTP Challenge for Access Token",icon:{name:"312",color:"green"}},sepft:{event:"Success Exchange",description:"Successful exchange of Password for Access Token",icon:{name:"312",color:"green"}},sercft:{event:"Success Exchange",description:"Successful exchange of Password and MFA Recovery code for Access Token",icon:{name:"312",color:"green"}},sertft:{event:"Success Exchange",description:"Successful exchange of Refresh Token for Access Token",icon:{name:"312",color:"green"}},sys_os_update_end:{event:"Auth0 OS Update Ended",icon:{name:"312",color:"green"}},sys_os_update_start:{event:"Auth0 OS Update Started",icon:{name:"312",color:"green"}},sys_update_end:{event:"Auth0 Update Ended",icon:{name:"312",color:"green"}},sys_update_start:{event:"Auth0 Update Started",icon:{name:"312",color:"green"}},ublkdu:{event:"User login block released",description:"User block setup by anomaly detection has been released",icon:{name:"312",color:"green"}}},Qn={loading:!1,error:null,logId:null,record:Object(ae.Map)()},Yn=Object(ie.a)(Object(ae.fromJS)(Qn),(un={},Y()(un,C.q,function(e){return e.merge(I()({},Qn))}),Y()(un,C.Z,function(e,t){return e.merge(I()({},Qn,{loading:!0,logId:t.meta.logId}))}),Y()(un,C.ab,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(un,C.Y,function(e,t){var r=t.payload.data;if(r.log._id!==e.get("logId"))return e;var n=zn[r.log.type];if(!n)n={icon:{name:"354",color:"#FFA500"}};return r.log.shortType=r.log.type,r.log.type=n.event,e.merge({loading:!1,record:Object(ae.fromJS)(r.log)})}),un)),Zn={loading:!1,error:null,records:[],currentRecord:null},Xn=Object(ie.a)(Object(ae.fromJS)(Zn),(dn={},Y()(dn,C.W,function(e,t){return e.merge(I()({},Zn,{loading:!0,records:0===t.meta.page?[]:e.get("records")}))}),Y()(dn,C.X,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(dn,C.V,function(e,t){var r=t.payload.data;return e.merge({loading:!1,nextPage:t.meta.page+1,records:e.get("records").concat(Object(ae.fromJS)(r.map(function(e){if(e.shortType=e.type,e.type=zn[e.type],!e.type)e.type={icon:{name:"354",color:"#FFA500"}};return e})))})}),dn)),$n={error:null,loading:!1,requesting:!1,user:null,provider:null},eo=Object(ie.a)(Object(ae.fromJS)($n),(pn={},Y()(pn,C.ic,function(e,t){return e.merge(I()({},$n,{user:t.user,provider:t.provider,requesting:!0}))}),Y()(pn,C.m,function(e){return e.merge(I()({},$n))}),Y()(pn,C.Yb,function(e){return e.merge({loading:!0})}),Y()(pn,C.Zb,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(pn,C.Xb,function(e){return e.merge(I()({},$n))}),pn)),to={error:null,loading:!1,requesting:!1,user:null,connection:null},ro=Object(ie.a)(Object(ae.fromJS)(to),(gn={},Y()(gn,C.fc,function(e,t){return e.merge(I()({},to,{user:t.user,connection:t.connection,requesting:!0}))}),Y()(gn,C.j,function(e){return e.merge(I()({},to))}),Y()(gn,C.Mb,function(e){return e.merge({loading:!0})}),Y()(gn,C.Nb,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(gn,C.Lb,function(e){return e.merge(I()({},to))}),gn)),no={error:null,loading:!1,requesting:!1,user:null,connection:null},oo=Object(ie.a)(Object(ae.fromJS)(no),(mn={},Y()(mn,C.gc,function(e,t){return e.merge(I()({},no,{user:t.user,connection:t.connection,requesting:!0}))}),Y()(mn,C.k,function(e){return e.merge(I()({},no))}),Y()(mn,C.Qb,function(e){return e.merge({loading:!0})}),Y()(mn,C.Rb,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(mn,C.Pb,function(e){return e.merge(I()({},no))}),mn)),ao=Object(ie.a)(Object(ae.fromJS)({}),(fn={},Y()(fn,C.db,function(e,t){return e.setIn([t.meta.name],Object(ae.fromJS)({loading:!0,error:null,script:null,token:null}))}),Y()(fn,C.eb,function(e,t){return e.setIn([t.meta.name],Object(ae.fromJS)({loading:!1,error:t.errorData}))}),Y()(fn,C.cb,function(e,t){return e.setIn([t.meta.name],Object(ae.fromJS)({loading:!1,script:t.payload.data.script}))}),Y()(fn,C.zc,function(e,t){return e.setIn([t.meta.name,"loading"],!0).setIn([t.meta.name,"script"],t.meta.script)}),Y()(fn,C.Ac,function(e,t){return e.setIn([t.meta.name,"loading"],!1).setIn([t.meta.name,"error"],t.errorData)}),Y()(fn,C.yc,function(e,t){return e.setIn([t.meta.name,"loading"],!1)}),fn)),io=r(514),so=Object(ie.a)(Object(ae.fromJS)({useAlt:!1,path:""}),(hn={},Y()(hn,C.sc,function(e,t){return e.merge({useAlt:t.payload.useAlt,path:t.payload.path})}),Y()(hn,C.Db,function(e,t){return e.merge({useAlt:t.payload.useAlt,path:t.payload.path})}),hn)),co={error:null,loading:!1,requesting:!1,user:null},lo=Object(ie.a)(Object(ae.fromJS)(co),(En={},Y()(En,C.kc,function(e,t){return e.merge({user:t.user,requesting:!0})}),Y()(En,C.o,function(e){return e.merge(I()({},co))}),Y()(En,C.vc,function(e){return e.merge({loading:!0})}),Y()(En,C.wc,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(En,C.uc,function(e){return e.merge(I()({},co))}),En)),uo={loading:!1,error:null,userId:null,record:{},memberships:[],connection:{},logs:{loading:!1,error:null,records:[]},devices:{loading:!1,error:null,records:{}}},po=Object(ie.a)(Object(ae.fromJS)(uo.logs),(yn={},Y()(yn,C.vb,function(e){return e.merge(I()({},uo.logs,{loading:!0}))}),Y()(yn,C.wb,function(e,t){return e.merge(I()({},uo.logs,{loading:!1,error:t.errorData}))}),Y()(yn,C.ub,function(e,t){return e.merge({loading:!1,records:Object(ae.fromJS)(void 0!==t.payload.data?t.payload.data.map(function(e){if(e.time_ago=ct()(e.date).fromNow(),e.shortType=e.type,e.type=zn[e.type],!e.type)e.type={event:"Unknown Error",icon:{name:"354",color:"#FFA500"}};return e}):[])})}),yn)),go=Object(ie.a)(Object(ae.fromJS)(uo.devices),(bn={},Y()(bn,C.qb,function(e){return e.merge(I()({},uo.devices,{loading:!0}))}),Y()(bn,C.rb,function(e,t){return e.merge(I()({},uo.devices,{error:t.errorData}))}),Y()(bn,C.pb,function(e,t){var r=t.payload.data.devices.reduce(function(e,t){return e[t.device_name]=(e[t.device_name]||0)+1,e},{});return e.merge({loading:!1,records:Object(ae.fromJS)(r)})}),bn)),mo=Object(ie.a)(Object(ae.fromJS)(uo),(vn={},Y()(vn,C.xb,function(e,t){return e.merge({error:null,loading:!0,userId:t.meta.userId})}),Y()(vn,C.yb,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(vn,C.sb,function(e,t){var r=t.payload.data;if(r.user.user_id!==e.get("userId"))return e;else return e.merge({loading:!1,record:Object(ae.fromJS)(r.user),memberships:Object(ae.fromJS)(r.memberships),connection:Object(ae.fromJS)(r.connection)})}),Y()(vn,C.vb,function(e,t){return e.merge({logs:po(e.get("logs"),t)})}),Y()(vn,C.wb,function(e,t){return e.merge({logs:po(e.get("logs"),t)})}),Y()(vn,C.ub,function(e,t){return e.merge({logs:po(e.get("logs"),t)})}),Y()(vn,C.qb,function(e,t){return e.merge({devices:go(e.get("devices"),t)})}),Y()(vn,C.rb,function(e,t){return e.merge({devices:go(e.get("devices"),t)})}),Y()(vn,C.pb,function(e,t){return e.merge({devices:go(e.get("devices"),t)})}),vn)),fo={error:null,record:null,loading:!1,validationErrors:{}},ho=Object(ie.a)(Object(ae.fromJS)(fo),(_n={},Y()(_n,C.bc,function(e,t){return e.merge(I()({},fo,{record:{memberships:t.payload.memberships,connection:t.payload.connection}}))}),Y()(_n,C.f,function(e){return e.merge(I()({},fo))}),Y()(_n,C.t,function(e){return e.merge({loading:!0})}),Y()(_n,C.u,function(e,t){return e.merge({loading:!1,validationErrors:{},error:t.errorData})}),Y()(_n,C.s,function(e){return e.merge(I()({},fo))}),_n)),Eo={error:null,loading:!1,requesting:!1,user:null},yo=Object(ie.a)(Object(ae.fromJS)(Eo),(Cn={},Y()(Cn,C.cc,function(e,t){return e.merge(I()({},Eo,{user:t.user,requesting:!0}))}),Y()(Cn,C.g,function(e){return e.merge(I()({},Eo))}),Y()(Cn,C.x,function(e){return e.merge({loading:!0})}),Y()(Cn,C.y,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(Cn,C.w,function(e){return e.merge(I()({},Eo))}),Cn)),bo={error:null,userId:null,record:null,loading:!1,validationErrors:{}},vo=Object(ie.a)(Object(ae.fromJS)(bo),(Tn={},Y()(Tn,C.ec,function(e,t){return e.merge(I()({},bo,{userId:t.payload.user.user_id,record:t.payload.user}))}),Y()(Tn,C.i,function(e){return e.merge(I()({},bo))}),Y()(Tn,C.Bb,function(e){return e.merge({loading:!0})}),Y()(Tn,C.Cb,function(e,t){return e.merge({loading:!1,validationErrors:{},error:t.errorData})}),Y()(Tn,C.Ab,function(e){return e.merge(I()({},bo))}),Tn)),_o={error:null,loading:!1,requesting:!1,user:null,connection:null},Co=Object(ie.a)(Object(ae.fromJS)(_o),(Sn={},Y()(Sn,C.lc,function(e,t){return e.merge(I()({},_o,{user:t.user,connection:t.connection,requesting:!0}))}),Y()(Sn,C.p,function(e){return e.merge(I()({},_o))}),Y()(Sn,C.Ec,function(e,t){return e.merge({loading:!0,user:t.meta.user})}),Y()(Sn,C.Fc,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(Sn,C.Dc,function(e){return e.merge(I()({},_o))}),Sn)),To={loading:!1,error:null,records:[],total:0,currentPage:1,pages:1,selectedFilter:"",searchValue:"",sortProperty:"last_login",sortOrder:-1},So=Object(ie.a)(Object(ae.fromJS)(To),(Dn={},Y()(Dn,C.mb,function(e,t){return e.merge(I()({},To,{loading:!0,records:0===t.meta.page?[]:e.get("records"),pages:0===t.meta.page?1:e.get("pages"),searchValue:t.meta.searchValue,sortProperty:t.meta.sortProperty,sortOrder:t.meta.sortOrder}))}),Y()(Dn,C.nb,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(Dn,C.lb,function(e,t){var r=t.payload.data;return e.merge({loading:!1,total:r.total,pages:Math.ceil(r.total/10),nextPage:t.meta.page+1,selectedFilter:t.meta.selectedFilter,records:Object(ae.fromJS)(r.users.map(function(e){return I()({},e,{last_login_relative:e.last_login?ct()(e.last_login).fromNow():"Never"})}))})}),Y()(Dn,C.b,function(e,t){return e.updateIn(["records",e.get("records").findIndex(function(e){return e.get("user_id")===t.meta.userId}),"blocked"],function(){return!0})}),Y()(Dn,C.uc,function(e,t){return e.updateIn(["records",e.get("records").findIndex(function(e){return e.get("user_id")===t.meta.userId}),"blocked"],function(){return!1})}),Y()(Dn,C.Tb,function(e,t){return e.updateIn(["records",e.get("records").findIndex(function(e){return e.get("user_id")===t.meta.userId}),"blocked_for"],function(){return[]})}),Y()(Dn,C.Xb,function(e,t){return e.updateIn(["records",e.get("records").findIndex(function(e){return e.get("user_id")===t.meta.userId}),"multifactor"],function(e){return e&&e.splice(0,1)})}),Dn)),Do={error:null,loading:!1,requesting:!1,user:null},Fo=Object(ie.a)(Object(ae.fromJS)(Do),(Fn={},Y()(Fn,C.jc,function(e,t){return e.merge(I()({},Do,{user:t.user,requesting:!0}))}),Y()(Fn,C.n,function(e){return e.merge(I()({},Do))}),Y()(Fn,C.oc,function(e){return e.merge({loading:!0})}),Y()(Fn,C.pc,function(e,t){return e.merge({loading:!1,error:t.errorData})}),Y()(Fn,C.nc,function(e){return e.merge(I()({},Do))}),Fn));var Ro=Object(jn.combineReducers)({routing:y.routerReducer,accessLevel:Un,applications:In,auth:xn,block:Jn,connections:Hn,emailChange:Gn,languageDictionary:Wn,log:Yn,logs:Xn,mfa:eo,passwordChange:ro,passwordReset:oo,scripts:ao,settings:io.a,styleSettings:so,unblock:lo,removeBlockedIPs:ce,user:mo,userCreate:ho,userDelete:yo,fieldsChange:vo,usernameChange:Co,users:So,verificationEmail:Fo,lastAction:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1?arguments[1]:void 0},form:Pt.c});r(975);u.a.defaults.baseURL=window.config.BASE_URL;var Po,Ao,wo,Oo=Object(h.useRouterHistory)(E.createHistory)({basename:window.config.BASE_PATH||""}),Lo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[jn.applyMiddleware.apply(void 0,[Object(Ln.a)(),On.a,function(){return function(e){return function(t){if(t&&t.type.endsWith("_REJECTED")&&t.payload){var r=t.payload.statusText||t.payload.status||"Unknown Server Error",n=t.payload.response&&t.payload.response.status||500,o=t.payload.data&&t.payload.data.message;if(!o)o=t.payload.response&&t.payload.response.data&&t.payload.response.data.message;if(o)r=o.message||o;t.errorData={type:t.type.replace("_REJECTED",""),message:r,status:n}}e(t)}}},function(){return function(e){return function(t){if(e(t),t&&t.meta&&t.type.endsWith("_FULFILLED")&&t.meta.onSuccess)t.meta.onSuccess(t.payload)}}},An()({predicate:function(){return!1}})].concat(tr()(e)))];if(0);var n=jn.compose.apply(void 0,r)(jn.createStore)(Ro,t);if(0);return n}([Object(y.routerMiddleware)(Oo)],{}),jo=Object(y.syncHistoryWithStore)(Oo,Lo);if(Lo.subscribe(function(){switch(Lo.getState().lastAction.type){case C.gb:var e="true"===localStorage.getItem("delegated-admin:use-alt-css"),t=Lo.getState().settings.get("record").get("settings"),r=t.get("dict");if(r){var n=r.get("title");if(n&&""!==n)document.title=n}var o=e?t.get("altcss"):t.get("css");if(o&&o.length){var a=document.getElementsByTagName("head")[0],i=document.createElement("link");i.id="custom_css",i.rel="stylesheet",i.type="text/css",i.href=o,i.media="all",a.appendChild(i)}break;case C.sc:var s=Lo.getState().styleSettings.get("path");if(""!==s){var c=document.getElementById("custom_css");if(c)c.href=s;else{var l=document.getElementsByTagName("head")[0],u=document.createElement("link");u.id="custom_css",u.rel="stylesheet",u.type="text/css",u.href=s,u.media="all",l.appendChild(u)}}}}),Lo.dispatch(w()),m.a.render(p.a.createElement(f.Provider,{store:Lo},(Po=jo,p.a.createElement(h.Router,{history:Po},p.a.createElement(h.Route,{path:"/",component:(Ao=tt,wo=function(e){function t(){return q()(this,t),J()(this,V()(t).apply(this,arguments))}return z()(t,e),x()(t,[{key:"componentWillMount",value:function(){this.requireAuthentication()}},{key:"componentWillReceiveProps",value:function(){this.requireAuthentication()}},{key:"requireAuthentication",value:function(){if(!this.props.auth.isAuthenticated&&!this.props.auth.isAuthenticating)if(!this.props.location)this.props.push("/login");else this.props.push("/login?returnUrl=".concat(this.props.location.pathname).concat(this.props.location.search?this.props.location.search:""));u.a.defaults.headers.common["dae-locale"]=window.config.LOCALE}},{key:"render",value:function(){if(this.props.auth.isAuthenticated)return p.a.createElement(Ao,this.props);else return p.a.createElement("div",null)}}]),t}(p.a.Component),Y()(wo,"propTypes",{push:X.a.func.isRequired,auth:X.a.object.isRequired,location:X.a.object.isRequired}),Object(f.connect)(function(e){return{auth:e.auth.toJS()}},{push:y.push})(wo))},p.a.createElement(h.IndexRedirect,{to:"/users"}),p.a.createElement(h.Route,{path:"logs",component:vt}),p.a.createElement(h.Route,{path:"configuration",component:Rn}),p.a.createElement(h.Route,{path:"users",component:Yr}),p.a.createElement(h.Route,{path:"users/:id",component:zr})),p.a.createElement(h.Route,{path:"/login",component:nt})))),document.getElementById("app")),0);}});